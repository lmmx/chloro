COMPARISON DIFF
============================================================

Original size: 45712 bytes
Chloro size:   45091 bytes
Rustfmt size:  45712 bytes

âœ— Outputs DIFFER

--- DIFF (- rustfmt, + chloro) ---
 
 use crate::{AssistContext, AssistId, Assists};
 
-// Assist: unwrap_option_return_type
-//
-// Unwrap the function's return type.
-//
-// ```
-// # //- minicore: option
-// fn foo() -> Option<i32>$0 { Some(42i32) }
-// ```
-// ->
-// ```
-// fn foo() -> i32 { 42i32 }
-// ```
-
-// Assist: unwrap_result_return_type
-//
-// Unwrap the function's return type.
-//
-// ```
-// # //- minicore: result
-// fn foo() -> Result<i32>$0 { Ok(42i32) }
-// ```
-// ->
-// ```
-// fn foo() -> i32 { 42i32 }
-// ```
-
-pub(crate) fn unwrap_return_type(acc: &mut Assists, ctx: &AssistContext<'_>) -> Option<()> {
+pub(crate) fn unwrap_return_type(
+    acc: &mut Assists,
+    ctx: &AssistContext<'_>,
+) -> Option<()> {
     let ret_type = ctx.find_node_at_offset::<ast::RetType>()?;
     let parent = ret_type.syntax().parent()?;
     let body_expr = match_ast! {
             _ => return None,
         }
     };
-
     let type_ref = &ret_type.ty()?;
     let Some(hir::Adt::Enum(ret_enum)) = ctx.sema.resolve_type(type_ref)?.as_adt() else {
         return None;
     };
-
     let famous_defs = FamousDefs(&ctx.sema, ctx.sema.scope(type_ref.syntax())?.krate());
-
     let kind = UnwrapperKind::ALL
         .iter()
         .find(|k| matches!(k.core_type(&famous_defs), Some(core_type) if ret_enum == core_type))?;
-
     let happy_type = extract_wrapped_type(type_ref)?;
-
     acc.add(kind.assist_id(), kind.label(), type_ref.syntax().text_range(), |builder| {
         let mut editor = builder.make_editor(&parent);
         let make = SyntaxFactory::with_mappings();
 }
 
 impl UnwrapperKind {
-    const ALL: &'static [UnwrapperKind] = &[UnwrapperKind::Option, UnwrapperKind::Result];
 
     fn assist_id(&self) -> AssistId {
         let s = match self {
             UnwrapperKind::Option => "unwrap_option_return_type",
             UnwrapperKind::Result => "unwrap_result_return_type",
         };
-
         AssistId::refactor_rewrite(s)
     }
 
         }
     }
 
-    fn core_type(&self, famous_defs: &FamousDefs<'_, '_>) -> Option<hir::Enum> {
+    fn core_type(
+        &self,
+        famous_defs: &FamousDefs<'_, '_>,
+    ) -> Option<hir::Enum> {
         match self {
             UnwrapperKind::Option => famous_defs.core_option_Option(),
             UnwrapperKind::Result => famous_defs.core_result_Result(),
     }
 }
 
-fn tail_cb_impl(acc: &mut Vec<ast::Expr>, e: &ast::Expr) {
+fn tail_cb_impl(
+    acc: &mut Vec<ast::Expr>,
+    e: &ast::Expr,
+) {
     match e {
         ast::Expr::BreakExpr(break_expr) => {
             if let Some(break_expr_arg) = break_expr.expr() {
     }
 }
 
-// Tries to extract `T` from `Option<T>` or `Result<T, E>`.
 fn extract_wrapped_type(ty: &ast::Type) -> Option<ast::Type> {
     let ast::Type::PathType(path_ty) = ty else {
         return None;
 #[cfg(test)]
 mod tests {
     use crate::tests::{check_assist_by_label, check_assist_not_applicable_by_label};
-
     use super::*;
-
     #[test]
     fn unwrap_option_return_type_simple() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_unit_type() {
         check_assist_by_label(
 "#,
             "Unwrap Option return type",
         );
-
         // Unformatted return type
         check_assist_by_label(
             unwrap_return_type,
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_none() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_multi_none() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_ending_with_parent() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_break_split_tail() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_bad_cursor() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_bad_cursor_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_closure_non_block() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_already_not_option_std() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_already_not_option_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_only() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_without_block_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_nested_if() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_await() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_array() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_cast() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_match() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_loop_with_tail() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_loop_in_let_stmt() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_match_return_expr() {
         check_assist_by_label(
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_match_deeper() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_early_return() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_in_tail_position() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_closure() {
         check_assist_by_label(
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_weird_forms() {
         check_assist_by_label(
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_nested_type() {
         check_assist_by_label(
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Option return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_unit_type() {
         check_assist_by_label(
 "#,
             "Unwrap Result return type",
         );
-
         // Unformatted return type
         check_assist_by_label(
             unwrap_return_type,
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_ending_with_parent() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_break_split_tail() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_bad_cursor() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_bad_cursor_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_closure_non_block() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_already_not_result_std() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_already_not_result_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_only() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_without_block_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_nested_if() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_await() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_array() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_cast() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_match() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_loop_with_tail() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_loop_in_let_stmt() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_match_return_expr() {
         check_assist_by_label(
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_match_deeper() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_early_return() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_in_tail_position() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_closure() {
         check_assist_by_label(
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_weird_forms() {
         check_assist_by_label(
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_nested_type() {
         check_assist_by_label(
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"
 "#,
             "Unwrap Result return type",
         );
-
         check_assist_by_label(
             unwrap_return_type,
             r#"