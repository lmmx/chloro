COMPARISON DIFF
============================================================

Original size: 5345 bytes
Chloro size:   4922 bytes
Rustfmt size:  5475 bytes

âœ— Outputs DIFFER

--- DIFF (- rustfmt, + chloro) ---
 //! Builtin attributes.
+
 use intern::sym;
 use span::Span;
 
-use crate::{db::ExpandDatabase, name, tt, ExpandResult, MacroCallId, MacroCallKind};
-
+use crate::{ExpandResult, MacroCallId, MacroCallKind, db::ExpandDatabase, name, tt};
 use super::quote;
 
 macro_rules! register_builtin {
     }
 
     pub fn is_derive(self) -> bool {
-        matches!(
-            self,
-            BuiltinAttrExpander::Derive | BuiltinAttrExpander::DeriveConst
-        )
+        matches!(self, BuiltinAttrExpander::Derive | BuiltinAttrExpander::DeriveConst)
     }
+
     pub fn is_test(self) -> bool {
         matches!(self, BuiltinAttrExpander::Test)
     }
+
     pub fn is_bench(self) -> bool {
         matches!(self, BuiltinAttrExpander::Bench)
     }
+
     pub fn is_test_case(self) -> bool {
         matches!(self, BuiltinAttrExpander::TestCase)
     }
 }
-
-register_builtin! {
-    (bench, Bench) => dummy_gate_test_expand,
-    (cfg_accessible, CfgAccessible) => dummy_attr_expand,
-    (cfg_eval, CfgEval) => dummy_attr_expand,
-    (derive, Derive) => derive_expand,
-    // derive const is equivalent to derive for our proposes.
-    (derive_const, DeriveConst) => derive_expand,
-    (global_allocator, GlobalAllocator) => dummy_attr_expand,
-    (test, Test) => dummy_gate_test_expand,
-    (test_case, TestCase) => dummy_gate_test_expand
-}
-
+// derive const is equivalent to derive for our proposes.
 pub fn find_builtin_attr(ident: &name::Name) -> Option<BuiltinAttrExpander> {
     BuiltinAttrExpander::find_by_name(ident)
 }
 ) -> ExpandResult<tt::TopSubtree> {
     let loc = db.lookup_intern_macro_call(id);
     let derives = match &loc.kind {
-        MacroCallKind::Attr {
-            attr_args: Some(attr_args),
-            ..
-        } if loc.def.is_attribute_derive() => attr_args,
+        MacroCallKind::Attr { attr_args: Some(attr_args), .. } if loc.def.is_attribute_derive() => {
+            attr_args
+        }
         _ => {
             return ExpandResult::ok(tt::TopSubtree::empty(tt::DelimSpan {
                 open: span,
     args: &tt::TopSubtree,
     call_site: Span,
 ) -> ExpandResult<tt::TopSubtree> {
-    let mk_leaf = |char| {
-        tt::Leaf::Punct(tt::Punct {
-            char,
-            spacing: tt::Spacing::Alone,
-            span: call_site,
-        })
-    };
-
+    let mk_leaf =
+        |char| tt::Leaf::Punct(tt::Punct { char, spacing: tt::Spacing::Alone, span: call_site });
     let mut token_trees = tt::TopSubtreeBuilder::new(args.top_subtree().delimiter);
     let iter = args.token_trees().split(|tt| {
-        matches!(
-            tt,
-            tt::TtElement::Leaf(tt::Leaf::Punct(tt::Punct { char: ',', .. }))
-        )
+        matches!(tt, tt::TtElement::Leaf(tt::Leaf::Punct(tt::Punct { char: ',', .. })))
     });
     for tts in iter {
         token_trees.extend([mk_leaf('#'), mk_leaf('!')]);