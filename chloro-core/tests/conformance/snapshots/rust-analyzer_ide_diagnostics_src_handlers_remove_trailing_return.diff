COMPARISON DIFF
============================================================

Original size: 7346 bytes
Chloro size:   7165 bytes
Rustfmt size:  7366 bytes

âœ— Outputs DIFFER

--- DIFF (- rustfmt, + chloro) ---
-use hir::{db::ExpandDatabase, diagnostics::RemoveTrailingReturn, FileRange};
+use hir::{FileRange, db::ExpandDatabase, diagnostics::RemoveTrailingReturn};
 use ide_db::text_edit::TextEdit;
 use ide_db::{assists::Assist, source_change::SourceChange};
-use syntax::{ast, AstNode};
+use syntax::{AstNode, ast};
 
-use crate::{adjusted_display_range, fix, Diagnostic, DiagnosticCode, DiagnosticsContext};
-
-// Diagnostic: remove-trailing-return
-//
-// This diagnostic is triggered when there is a redundant `return` at the end of a function
-// or closure.
-pub(crate) fn remove_trailing_return(
-    ctx: &DiagnosticsContext<'_>,
-    d: &RemoveTrailingReturn,
-) -> Option<Diagnostic> {
+use crate::{Diagnostic, DiagnosticCode, DiagnosticsContext, adjusted_display_range, fix};
+pub(crate) fn remove_trailing_return(ctx: &DiagnosticsContext<'_>, d: &RemoveTrailingReturn) -> Option<Diagnostic> {
     if d.return_expr.file_id.macro_file().is_some() {
         // FIXME: Our infra can't handle allow from within macro expansions rn
         return None;
     }
-
     let display_range = adjusted_display_range(ctx, d.return_expr, &|return_expr| {
         return_expr
             .syntax()
     let root = ctx.sema.db.parse_or_expand(d.return_expr.file_id);
     let return_expr = d.return_expr.value.to_node(&root);
     let stmt = return_expr.syntax().parent().and_then(ast::ExprStmt::cast);
-
-    let FileRange { range, file_id } = ctx
-        .sema
-        .original_range_opt(stmt.as_ref().map_or(return_expr.syntax(), AstNode::syntax))?;
+    let FileRange { range, file_id } =
+        ctx.sema.original_range_opt(stmt.as_ref().map_or(return_expr.syntax(), AstNode::syntax))?;
     if Some(file_id) != d.return_expr.file_id.file_id() {
         return None;
     }
-
-    let replacement = return_expr
-        .expr()
-        .map_or_else(String::new, |expr| format!("{}", expr.syntax().text()));
+    let replacement =
+        return_expr.expr().map_or_else(String::new, |expr| format!("{}", expr.syntax().text()));
     let edit = TextEdit::replace(range, replacement);
     let source_change = SourceChange::from_text_edit(file_id.file_id(ctx.sema.db), edit);
-
     Some(vec![fix(
         "remove_trailing_return",
         "Replace return <expr>; with <expr>",
     use crate::tests::{
         check_diagnostics, check_diagnostics_with_disabled, check_fix, check_fix_with_disabled,
     };
-
     #[test]
     fn remove_trailing_return() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn remove_trailing_return_inner_function() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn remove_trailing_return_closure() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn remove_trailing_return_unit() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn remove_trailing_return_no_semi() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn remove_trailing_return_in_if() {
         check_diagnostics_with_disabled(
             &["remove-unnecessary-else"],
         );
     }
-
     #[test]
     fn remove_trailing_return_in_match() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn no_diagnostic_if_no_return_keyword() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn no_diagnostic_if_not_last_statement() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn no_diagnostic_if_not_last_statement2() {
         check_diagnostics(
 "#,
         );
     }
-
     #[test]
     fn replace_with_expr() {
         check_fix(
 "#,
         );
     }
-
     #[test]
     fn replace_with_unit() {
         check_fix(
 "#,
         );
     }
-
     #[test]
     fn replace_with_expr_no_semi() {
         check_fix(
 "#,
         );
     }
-
     #[test]
     fn replace_in_inner_function() {
         check_fix(
 "#,
         );
     }
-
     #[test]
     fn replace_in_closure() {
         check_fix(
 "#,
         );
     }
-
     #[test]
     fn replace_in_if() {
         check_fix_with_disabled(
 "#,
         );
     }
-
     #[test]
     fn replace_in_match() {
         check_fix(