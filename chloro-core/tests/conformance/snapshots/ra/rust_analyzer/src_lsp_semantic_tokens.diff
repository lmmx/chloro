COMPARISON DIFF
============================================================

Original size: 11108 bytes
Chloro size:   8306 bytes
Rustfmt size:  11838 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
         }
     };
 }
-
-define_semantic_token_types![
-    standard {
-        COMMENT,
-        DECORATOR,
-        ENUM_MEMBER,
-        ENUM,
-        FUNCTION,
-        INTERFACE,
-        KEYWORD,
-        MACRO,
-        METHOD,
-        NAMESPACE,
-        NUMBER,
-        OPERATOR,
-        PARAMETER,
-        PROPERTY,
-        STRING,
-        STRUCT,
-        TYPE_PARAMETER,
-        VARIABLE,
-        TYPE,
-    }
-
-    custom {
-        (ANGLE, "angle"),
-        (ARITHMETIC, "arithmetic") => OPERATOR,
-        (ATTRIBUTE_BRACKET, "attributeBracket") => DECORATOR,
-        (ATTRIBUTE, "attribute") => DECORATOR,
-        (BITWISE, "bitwise") => OPERATOR,
-        (BOOLEAN, "boolean"),
-        (BRACE, "brace"),
-        (BRACKET, "bracket"),
-        (BUILTIN_ATTRIBUTE, "builtinAttribute") => DECORATOR,
-        (BUILTIN_TYPE, "builtinType") => TYPE,
-        (CHAR, "character") => STRING,
-        (COLON, "colon"),
-        (COMMA, "comma"),
-        (COMPARISON, "comparison") => OPERATOR,
-        (CONST_PARAMETER, "constParameter"),
-        (CONST, "const") => VARIABLE,
-        (DERIVE_HELPER, "deriveHelper") => DECORATOR,
-        (DERIVE, "derive") => DECORATOR,
-        (DOT, "dot"),
-        (ESCAPE_SEQUENCE, "escapeSequence") => STRING,
-        (FORMAT_SPECIFIER, "formatSpecifier") => STRING,
-        (GENERIC, "generic") => TYPE_PARAMETER,
-        (INVALID_ESCAPE_SEQUENCE, "invalidEscapeSequence") => STRING,
-        (LABEL, "label"),
-        (LIFETIME, "lifetime"),
-        (LOGICAL, "logical") => OPERATOR,
-        (MACRO_BANG, "macroBang") => MACRO,
-        (NEGATION, "negation") => OPERATOR,
-        (PARENTHESIS, "parenthesis"),
-        (PROC_MACRO, "procMacro") => MACRO,
-        (PUNCTUATION, "punctuation"),
-        (SELF_KEYWORD, "selfKeyword") => KEYWORD,
-        (SELF_TYPE_KEYWORD, "selfTypeKeyword") => KEYWORD,
-        (SEMICOLON, "semicolon"),
-        (STATIC, "static") => VARIABLE,
-        (TOOL_MODULE, "toolModule") => DECORATOR,
-        (TYPE_ALIAS, "typeAlias") => TYPE,
-        (UNION, "union") => TYPE,
-        (UNRESOLVED_REFERENCE, "unresolvedReference"),
-    }
-];
-
 macro_rules! count_tts {
     () => {0usize};
     ($_head:tt $($tail:tt)*) => {1usize + count_tts!($($tail)*)};
 }
+
 macro_rules! define_semantic_token_modifiers {
     (
         standard {
         const LAST_STANDARD_MOD: usize = count_tts!($($standard)*);
     };
 }
-
-define_semantic_token_modifiers![
-    standard {
-        ASYNC,
-        DOCUMENTATION,
-        DECLARATION,
-        STATIC,
-        DEFAULT_LIBRARY,
-    }
-    custom {
-        (ASSOCIATED, "associated"),
-        (ATTRIBUTE_MODIFIER, "attribute"),
-        (CALLABLE, "callable"),
-        (CONSTANT, "constant"),
-        (CONSUMING, "consuming"),
-        (CONTROL_FLOW, "controlFlow"),
-        (CRATE_ROOT, "crateRoot"),
-        (INJECTED, "injected"),
-        (INTRA_DOC_LINK, "intraDocLink"),
-        (LIBRARY, "library"),
-        (MACRO_MODIFIER, "macro"),
-        (MUTABLE, "mutable"),
-        (PROC_MACRO_MODIFIER, "procMacro"),
-        (PUBLIC, "public"),
-        (REFERENCE, "reference"),
-        (TRAIT_MODIFIER, "trait"),
-        (UNSAFE, "unsafe"),
-    }
-];
-
 #[derive(Default)]
 pub(crate) struct ModifierSet(pub(crate) u32);
 
 
 impl ops::BitOrAssign<SemanticTokenModifier> for ModifierSet {
     fn bitor_assign(&mut self, rhs: SemanticTokenModifier) {
-        let idx = SUPPORTED_MODIFIERS
-            .iter()
-            .position(|it| it == &rhs)
-            .unwrap();
+        let idx = SUPPORTED_MODIFIERS.iter().position(|it| it == &rhs).unwrap();
         self.0 |= 1 << idx;
     }
 }
 
 impl SemanticTokensBuilder {
     pub(crate) fn new(id: String) -> Self {
-        SemanticTokensBuilder {
-            id,
-            prev_line: 0,
-            prev_char: 0,
-            data: Default::default(),
-        }
+        SemanticTokensBuilder { id, prev_line: 0, prev_char: 0, data: Default::default() }
     }
 
     /// Push a new token onto the builder
                 push_char -= self.prev_char;
             }
         }
-
         // A token cannot be multiline
+
         let token_len = range.end.character - range.start.character;
 
         let token = SemanticToken {
     }
 }
 
-pub(crate) fn diff_tokens(old: &[SemanticToken], new: &[SemanticToken]) -> Vec<SemanticTokensEdit> {
-    let offset = new
-        .iter()
-        .zip(old.iter())
-        .take_while(|&(n, p)| n == p)
-        .count();
+pub(crate) fn diff_tokens(
+    old: &[SemanticToken],
+    new: &[SemanticToken],
+) -> Vec<SemanticTokensEdit> {
+    let offset = new.iter().zip(old.iter()).take_while(|&(n, p)| n == p).count();
 
     let (_, old) = old.split_at(offset);
     let (_, new) = new.split_at(offset);
 
-    let offset_from_end = new
-        .iter()
-        .rev()
-        .zip(old.iter().rev())
-        .take_while(|&(n, p)| n == p)
-        .count();
+    let offset_from_end =
+        new.iter().rev().zip(old.iter().rev()).take_while(|&(n, p)| n == p).count();
 
     let (old, _) = old.split_at(old.len() - offset_from_end);
     let (new, _) = new.split_at(new.len() - offset_from_end);
 #[cfg(test)]
 mod tests {
     use super::*;
-
     fn from(t: (u32, u32, u32, u32, u32)) -> SemanticToken {
         SemanticToken {
             delta_line: t.0,
             token_modifiers_bitset: t.4,
         }
     }
-
     #[test]
     fn test_diff_insert_at_end() {
         let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
-        let after = [
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-            from((11, 12, 13, 14, 15)),
-        ];
+        let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10)), from((11, 12, 13, 14, 15))];
 
         let edits = diff_tokens(&before, &after);
         assert_eq!(
             }
         );
     }
-
     #[test]
     fn test_diff_insert_at_beginning() {
         let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
-        let after = [
-            from((11, 12, 13, 14, 15)),
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-        ];
+        let after = [from((11, 12, 13, 14, 15)), from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
         assert_eq!(
             }
         );
     }
-
     #[test]
     fn test_diff_insert_in_middle() {
         let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
             SemanticTokensEdit {
                 start: 5,
                 delete_count: 0,
-                data: Some(vec![
-                    from((10, 20, 30, 40, 50)),
-                    from((60, 70, 80, 90, 100))
-                ])
+                data: Some(vec![from((10, 20, 30, 40, 50)), from((60, 70, 80, 90, 100))])
             }
         );
     }
-
     #[test]
     fn test_diff_remove_from_end() {
-        let before = [
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-            from((11, 12, 13, 14, 15)),
-        ];
+        let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10)), from((11, 12, 13, 14, 15))];
         let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
-        assert_eq!(
-            edits[0],
-            SemanticTokensEdit {
-                start: 10,
-                delete_count: 5,
-                data: Some(vec![])
-            }
-        );
+        assert_eq!(edits[0], SemanticTokensEdit { start: 10, delete_count: 5, data: Some(vec![]) });
     }
-
     #[test]
     fn test_diff_remove_from_beginning() {
-        let before = [
-            from((11, 12, 13, 14, 15)),
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-        ];
+        let before = [from((11, 12, 13, 14, 15)), from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
         let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
-        assert_eq!(
-            edits[0],
-            SemanticTokensEdit {
-                start: 0,
-                delete_count: 5,
-                data: Some(vec![])
-            }
-        );
+        assert_eq!(edits[0], SemanticTokensEdit { start: 0, delete_count: 5, data: Some(vec![]) });
     }
-
     #[test]
     fn test_diff_remove_from_middle() {
         let before = [
         let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
-        assert_eq!(
-            edits[0],
-            SemanticTokensEdit {
-                start: 5,
-                delete_count: 10,
-                data: Some(vec![])
-            }
-        );
+        assert_eq!(edits[0], SemanticTokensEdit { start: 5, delete_count: 10, data: Some(vec![]) });
     }
 }