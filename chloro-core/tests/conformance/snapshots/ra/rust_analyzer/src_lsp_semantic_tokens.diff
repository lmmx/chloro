COMPARISON DIFF
============================================================

Original size: 11108 bytes
Chloro size:   11138 bytes
Rustfmt size:  11838 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
     () => {0usize};
     ($_head:tt $($tail:tt)*) => {1usize + count_tts!($($tail)*)};
 }
+
 macro_rules! define_semantic_token_modifiers {
     (
         standard {
 
 impl ops::BitOrAssign<SemanticTokenModifier> for ModifierSet {
     fn bitor_assign(&mut self, rhs: SemanticTokenModifier) {
-        let idx = SUPPORTED_MODIFIERS
-            .iter()
-            .position(|it| it == &rhs)
-            .unwrap();
+        let idx = SUPPORTED_MODIFIERS.iter().position(|it| it == &rhs).unwrap();
         self.0 |= 1 << idx;
     }
 }
 
 impl SemanticTokensBuilder {
     pub(crate) fn new(id: String) -> Self {
-        SemanticTokensBuilder {
-            id,
-            prev_line: 0,
-            prev_char: 0,
-            data: Default::default(),
-        }
+        SemanticTokensBuilder { id, prev_line: 0, prev_char: 0, data: Default::default() }
     }
 
     /// Push a new token onto the builder
     }
 }
 
-pub(crate) fn diff_tokens(old: &[SemanticToken], new: &[SemanticToken]) -> Vec<SemanticTokensEdit> {
-    let offset = new
-        .iter()
-        .zip(old.iter())
-        .take_while(|&(n, p)| n == p)
-        .count();
+pub(crate) fn diff_tokens(
+    old: &[SemanticToken],
+    new: &[SemanticToken],
+) -> Vec<SemanticTokensEdit> {
+    let offset = new.iter().zip(old.iter()).take_while(|&(n, p)| n == p).count();
 
     let (_, old) = old.split_at(offset);
     let (_, new) = new.split_at(offset);
 
-    let offset_from_end = new
-        .iter()
-        .rev()
-        .zip(old.iter().rev())
-        .take_while(|&(n, p)| n == p)
-        .count();
+    let offset_from_end = new.iter().rev().zip(old.iter().rev()).take_while(|&(n, p)| n == p).count();
 
     let (old, _) = old.split_at(old.len() - offset_from_end);
     let (new, _) = new.split_at(new.len() - offset_from_end);
 #[cfg(test)]
 mod tests {
     use super::*;
-
     fn from(t: (u32, u32, u32, u32, u32)) -> SemanticToken {
         SemanticToken {
             delta_line: t.0,
             token_modifiers_bitset: t.4,
         }
     }
-
     #[test]
     fn test_diff_insert_at_end() {
         let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
-        let after = [
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-            from((11, 12, 13, 14, 15)),
-        ];
+        let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10)), from((11, 12, 13, 14, 15))];
 
         let edits = diff_tokens(&before, &after);
         assert_eq!(
             }
         );
     }
-
     #[test]
     fn test_diff_insert_at_beginning() {
         let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
-        let after = [
-            from((11, 12, 13, 14, 15)),
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-        ];
+        let after = [from((11, 12, 13, 14, 15)), from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
         assert_eq!(
             }
         );
     }
-
     #[test]
     fn test_diff_insert_in_middle() {
         let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
             SemanticTokensEdit {
                 start: 5,
                 delete_count: 0,
-                data: Some(vec![
-                    from((10, 20, 30, 40, 50)),
-                    from((60, 70, 80, 90, 100))
-                ])
+                data: Some(vec![from((10, 20, 30, 40, 50)), from((60, 70, 80, 90, 100))])
             }
         );
     }
-
     #[test]
     fn test_diff_remove_from_end() {
-        let before = [
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-            from((11, 12, 13, 14, 15)),
-        ];
+        let before = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10)), from((11, 12, 13, 14, 15))];
         let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
-        assert_eq!(
-            edits[0],
-            SemanticTokensEdit {
-                start: 10,
-                delete_count: 5,
-                data: Some(vec![])
-            }
-        );
+        assert_eq!(edits[0], SemanticTokensEdit { start: 10, delete_count: 5, data: Some(vec![]) });
     }
-
     #[test]
     fn test_diff_remove_from_beginning() {
-        let before = [
-            from((11, 12, 13, 14, 15)),
-            from((1, 2, 3, 4, 5)),
-            from((6, 7, 8, 9, 10)),
-        ];
+        let before = [from((11, 12, 13, 14, 15)), from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
         let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
-        assert_eq!(
-            edits[0],
-            SemanticTokensEdit {
-                start: 0,
-                delete_count: 5,
-                data: Some(vec![])
-            }
-        );
+        assert_eq!(edits[0], SemanticTokensEdit { start: 0, delete_count: 5, data: Some(vec![]) });
     }
-
     #[test]
     fn test_diff_remove_from_middle() {
         let before = [
         let after = [from((1, 2, 3, 4, 5)), from((6, 7, 8, 9, 10))];
 
         let edits = diff_tokens(&before, &after);
-        assert_eq!(
-            edits[0],
-            SemanticTokensEdit {
-                start: 5,
-                delete_count: 10,
-                data: Some(vec![])
-            }
-        );
+        assert_eq!(edits[0], SemanticTokensEdit { start: 5, delete_count: 10, data: Some(vec![]) });
     }
 }