COMPARISON DIFF
============================================================

Original size: 38709 bytes
Chloro size:   38515 bytes
Rustfmt size:  39488 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 use rust_analyzer::lsp::ext::{OnEnter, Runnables, RunnablesParams};
 use serde_json::json;
 use stdx::format_to_acc;
-
 use test_utils::skip_slow_tests;
 use testdir::TestDir;
 
-use crate::support::{project, Project};
+use crate::support::{Project, project};
 
 #[test]
 fn completes_items_from_standard_library() {
         text_document: server.doc_id("src/lib.rs"),
         work_done_progress_params: WorkDoneProgressParams::default(),
     });
-    let mut hints = serde_json::from_value::<Option<Vec<InlayHint>>>(res)
-        .unwrap()
-        .unwrap();
+    let mut hints = serde_json::from_value::<Option<Vec<InlayHint>>>(res).unwrap().unwrap();
     let hint = hints.pop().unwrap();
     assert!(hint.data.is_some());
     assert!(
         partial_result_params: PartialResultParams::default(),
         work_done_progress_params: WorkDoneProgressParams::default(),
     });
-    assert!(
-        res.to_string().contains("SpecialHashMap"),
-        "{}",
-        res.to_string()
-    );
+    assert!(res.to_string().contains("SpecialHashMap"), "{}", res.to_string());
 
     let res = server.send_request::<Completion>(CompletionParams {
         text_document_position: TextDocumentPositionParams::new(
     .wait_until_workspace_is_loaded();
 
     server.request::<Runnables>(
-        RunnablesParams {
-            text_document: server.doc_id("foo/tests/spam.rs"),
-            position: None,
-        },
+        RunnablesParams { text_document: server.doc_id("foo/tests/spam.rs"), position: None },
         json!([
           {
             "args": {
     );
 }
 
-// Each package in these workspaces should be run from its own root
 #[test]
 fn test_path_dependency_runnables() {
     if skip_slow_tests() {
     }
 }
 
-// The main fn in packages should be run from the workspace root
 #[test]
 fn test_runnables_cwd() {
     if skip_slow_tests() {
     .wait_until_workspace_is_loaded();
 
     server.request::<Runnables>(
-        RunnablesParams {
-            text_document: server.doc_id("foo/mainpkg/src/main.rs"),
-            position: None,
-        },
+        RunnablesParams { text_document: server.doc_id("foo/mainpkg/src/main.rs"), position: None },
         json!([
             "{...}",
             {
     );
 
     server.request::<Runnables>(
-        RunnablesParams {
-            text_document: server.doc_id("foo/otherpkg/src/lib.rs"),
-            position: None,
-        },
+        RunnablesParams { text_document: server.doc_id("foo/otherpkg/src/lib.rs"), position: None },
         json!([
             "{...}",
             {
     server.request::<RangeFormatting>(
         DocumentRangeFormattingParams {
             range: Range {
-                end: Position {
-                    line: 1,
-                    character: 0,
-                },
-                start: Position {
-                    line: 1,
-                    character: 0,
-                },
+                end: Position { line: 1, character: 0 },
+                start: Position { line: 1, character: 0 },
             },
             text_document: server.doc_id("src/lib.rs"),
             options: FormattingOptions {
 "#,
     );
 
-    let server = Project::with_fixture(&code)
-        .tmp_dir(tmp_dir)
-        .server()
-        .wait_until_workspace_is_loaded();
+    let server =
+        Project::with_fixture(&code).tmp_dir(tmp_dir).server().wait_until_workspace_is_loaded();
 
     server.request::<CodeActionRequest>(
         CodeActionParams {
     server.request::<OnEnter>(
         TextDocumentPositionParams {
             text_document: server.doc_id("src/m0.rs"),
-            position: Position {
-                line: 0,
-                character: 5,
-            },
+            position: Position { line: 0, character: 5 },
         },
         json!([{
             "insertTextFormat": 2,
     server.request::<OnEnter>(
         TextDocumentPositionParams {
             text_document: server.doc_id("src/main.rs"),
-            position: Position {
-                line: 0,
-                character: 8,
-            },
+            position: Position { line: 0, character: 8 },
         },
         json!([{
             "insertTextFormat": 2,
 }
 
 #[test]
-#[cfg(not(windows))] // windows requires elevated permissions to create symlinks
+#[cfg(not(windows))]
 fn root_contains_symlink_out_dirs_check() {
     if skip_slow_tests() {
         return;
         ),
         work_done_progress_params: Default::default(),
     });
-    let value = res
-        .get("contents")
-        .unwrap()
-        .get("value")
-        .unwrap()
-        .as_str()
-        .unwrap();
+    let value = res.get("contents").unwrap().get("value").unwrap().as_str().unwrap();
 
     expect![[r#"
 
 //- /src/to_mod/foo.rs
 
 "#;
-    let server = Project::with_fixture(code)
-        .tmp_dir(tmp_dir)
-        .server()
-        .wait_until_workspace_is_loaded();
-
+    let server =
+        Project::with_fixture(code).tmp_dir(tmp_dir).server().wait_until_workspace_is_loaded();
     //rename same level file
+
     server.request::<WillRenameFiles>(
         RenameFilesParams {
             files: vec![FileRename {
           ]
         }),
     );
-
     //rename file from mod.rs to foo.rs
+
     server.request::<WillRenameFiles>(
         RenameFilesParams {
             files: vec![FileRename {
-                old_uri: base_path
-                    .join("src/from_mod/mod.rs")
-                    .to_str()
-                    .unwrap()
-                    .to_owned(),
-                new_uri: base_path
-                    .join("src/from_mod/foo.rs")
-                    .to_str()
-                    .unwrap()
-                    .to_owned(),
+                old_uri: base_path.join("src/from_mod/mod.rs").to_str().unwrap().to_owned(),
+                new_uri: base_path.join("src/from_mod/foo.rs").to_str().unwrap().to_owned(),
             }],
         },
         json!(null),
     );
-
     //rename file from foo.rs to mod.rs
+
     server.request::<WillRenameFiles>(
         RenameFilesParams {
             files: vec![FileRename {
-                old_uri: base_path
-                    .join("src/to_mod/foo.rs")
-                    .to_str()
-                    .unwrap()
-                    .to_owned(),
-                new_uri: base_path
-                    .join("src/to_mod/mod.rs")
-                    .to_str()
-                    .unwrap()
-                    .to_owned(),
+                old_uri: base_path.join("src/to_mod/foo.rs").to_str().unwrap().to_owned(),
+                new_uri: base_path.join("src/to_mod/mod.rs").to_str().unwrap().to_owned(),
             }],
         },
         json!(null),
     );
-
     //rename same level file
+
     server.request::<WillRenameFiles>(
         RenameFilesParams {
             files: vec![FileRename {