COMPARISON DIFF
============================================================

Original size: 12893 bytes
Chloro size:   12857 bytes
Rustfmt size:  13169 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 #![cfg_attr(feature = "in-rust-tree", feature(rustc_private))]
 
 #[cfg(feature = "in-rust-tree")]
-extern crate rustc_driver as _;
 
 mod rustc_wrapper;
 
         flags::RustAnalyzerCmd::UnresolvedReferences(cmd) => cmd.run()?,
         flags::RustAnalyzerCmd::Ssr(cmd) => cmd.run()?,
         flags::RustAnalyzerCmd::Search(cmd) => cmd.run()?,
-        flags::RustAnalyzerCmd::Lsif(cmd) => cmd.run(
-            &mut std::io::stdout(),
-            Some(project_model::RustLibSource::Discover),
-        )?,
+        flags::RustAnalyzerCmd::Lsif(cmd) => {
+            cmd.run(&mut std::io::stdout(), Some(project_model::RustLibSource::Discover))?
+        }
         flags::RustAnalyzerCmd::Scip(cmd) => cmd.run()?,
         flags::RustAnalyzerCmd::RunTests(cmd) => cmd.run()?,
         flags::RustAnalyzerCmd::RustcTests(cmd) => cmd.run()?,
             std::thread::sleep(std::time::Duration::from_millis(100));
         }
     }
-    #[cfg(not(target_os = "windows"))]
-    {
+    #[cfg(not(target_os = "windows"))] {
         #[allow(unused_mut)]
         let mut d = 4;
         while d == 4 {
         }
     }
 
-    let log_file = env::var("RA_LOG_FILE")
-        .ok()
-        .map(PathBuf::from)
-        .or(log_file_flag);
+    let log_file = env::var("RA_LOG_FILE").ok().map(PathBuf::from).or(log_file_flag);
     let log_file = match log_file {
         Some(path) => {
             if let Some(parent) = path.parent() {
     thread_intent: stdx::thread::ThreadIntent,
     f: impl FnOnce() -> anyhow::Result<()> + Send + 'static,
 ) -> anyhow::Result<()> {
-    let handle = stdx::thread::Builder::new(thread_intent, thread_name)
-        .stack_size(STACK_SIZE)
-        .spawn(f)?;
+    let handle =
+        stdx::thread::Builder::new(thread_intent, thread_name).stack_size(STACK_SIZE).spawn(f)?;
 
     handle.join()?;
 
         )
     {
         tracing::info!("Patching lsp-types workspace diagnostics capabilities: {diag_caps:#?}");
-        capabilities
-            .workspace
-            .get_or_insert_default()
-            .diagnostic
-            .get_or_insert(diag_caps);
+        capabilities.workspace.get_or_insert_default().diagnostic.get_or_insert(diag_caps);
     }
 
     let root_path = match root_uri
             };
             let not = lsp_server::Notification::new(
                 ShowMessage::METHOD.to_owned(),
-                ShowMessageParams {
-                    typ: MessageType::WARNING,
-                    message: error_sink.to_string(),
-                },
+                ShowMessageParams { typ: MessageType::WARNING, message: error_sink.to_string() },
             );
-            connection
-                .sender
-                .send(lsp_server::Message::Notification(not))
-                .unwrap();
+            connection.sender.send(lsp_server::Message::Notification(not)).unwrap();
         }
     }
 
 
     // If the io_threads have an error, there's usually an error on the main
     // loop too because the channels are closed. Ensure we report both errors.
-    match (
-        rust_analyzer::main_loop(config, connection),
-        io_threads.join(),
-    ) {
+    match (rust_analyzer::main_loop(config, connection), io_threads.join()) {
         (Err(loop_e), Err(join_e)) => anyhow::bail!("{loop_e}\n{join_e}"),
         (Ok(_), Err(join_e)) => anyhow::bail!("{join_e}"),
         (Err(loop_e), Ok(_)) => anyhow::bail!("{loop_e}"),
 #[test]
 #[cfg(windows)]
 fn patch_path_prefix_works() {
-    assert_eq!(
-        patch_path_prefix(r"c:\foo\bar".into()),
-        PathBuf::from(r"C:\foo\bar")
-    );
-    assert_eq!(
-        patch_path_prefix(r"\\?\c:\foo\bar".into()),
-        PathBuf::from(r"\\?\C:\foo\bar")
-    );
+    assert_eq!(patch_path_prefix(r"c:\foo\bar".into()), PathBuf::from(r"C:\foo\bar"));
+    assert_eq!(patch_path_prefix(r"\\?\c:\foo\bar".into()), PathBuf::from(r"\\?\C:\foo\bar"));
 }