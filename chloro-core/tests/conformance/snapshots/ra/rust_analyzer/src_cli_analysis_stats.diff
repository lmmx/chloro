COMPARISON DIFF
============================================================

Original size: 58546 bytes
Chloro size:   58591 bytes
Rustfmt size:  58546 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! Fully type-check project and print various stats, like the number of type
 //! errors.
 
 use std::{
     env, fmt,
     ops::AddAssign,
-    panic::{AssertUnwindSafe, catch_unwind},
+    panic::{catch_unwind, AssertUnwindSafe},
     time::{SystemTime, UNIX_EPOCH},
 };
 
 use cfg::{CfgAtom, CfgDiff};
 use hir::{
-    Adt, AssocItem, Crate, DefWithBody, FindPathConfig, HasCrate, HasSource, HirDisplay, ModuleDef,
-    Name,
     db::{DefDatabase, ExpandDatabase, HirDatabase},
     next_solver::{DbInterner, GenericArgs},
+    Adt, AssocItem, Crate, DefWithBody, FindPathConfig, HasCrate, HasSource, HirDisplay, ModuleDef,
+    Name,
 };
 use hir_def::{
-    SyntheticSyntax,
     expr_store::BodySourceMap,
     hir::{ExprId, PatId},
+    SyntheticSyntax,
 };
 use ide::{
     Analysis, AnalysisHost, AnnotationConfig, DiagnosticsConfig, Edition, InlayFieldsToResolve,
     InlayHintsConfig, LineCol, RootDatabase,
 };
 use ide_db::{
+    base_db::{salsa::Database, SourceDatabase},
     EditionedFileId, LineIndexDatabase, MiniCore, SnippetCap,
-    base_db::{SourceDatabase, salsa::Database},
 };
 use itertools::Itertools;
-use load_cargo::{LoadCargoConfig, ProcMacroServerChoice, load_workspace};
+use load_cargo::{load_workspace, LoadCargoConfig, ProcMacroServerChoice};
 use oorandom::Rand32;
 use profile::StopWatch;
 use project_model::{CargoConfig, CfgOverrides, ProjectManifest, ProjectWorkspace, RustLibSource};
 use vfs::{AbsPathBuf, Vfs, VfsPath};
 
 use crate::cli::{
-    Verbosity,
     flags::{self, OutputFormat},
     full_name_of_item, print_memory_usage,
     progress_report::ProgressReport,
-    report_metric,
+    report_metric, Verbosity,
 };
 
 impl flags::AnalysisStats {
             Some(build_scripts_sw.elapsed())
         };
 
-        let (db, vfs, _proc_macro) =
-            load_workspace(workspace.clone(), &cargo_config.extra_env, &load_cargo_config)?;
+        let (db, vfs, _proc_macro) = load_workspace(workspace.clone(), &cargo_config.extra_env, &load_cargo_config)?;
         eprint!("{:<20} {}", "Database loaded:", db_load_sw.elapsed());
         eprint!(" (metadata {metadata_time}");
         if let Some(build_scripts_time) = build_scripts_time {
         eprintln!("  dependency item stats: {dep_item_stats}");
 
         // FIXME(salsa-transition): bring back stats for ParseQuery (file size)
+
         // and ParseMacroExpansionQuery (macro expansion "file") size whenever we implement
+
         // Salsa's memory usage tracking works with tracked functions.
 
         // let mut total_file_size = Bytes::default();
+
         // for e in ide_db::base_db::ParseQuery.in_db(db).entries::<Vec<_>>() {
+
         //     total_file_size += syntax_len(db.parse(e.key).syntax_node())
+
         // }
 
         // let mut total_macro_file_size = Bytes::default();
-        // for e in hir::db::ParseMacroExpansionQuery.in_db(db).entries::<Vec<_>>() {
-        //     let val = db.parse_macro_expansion(e.key).value.0;
-        //     total_macro_file_size += syntax_len(val.syntax_node())
-        // }
-        // eprintln!("source files: {total_file_size}, macro files: {total_macro_file_size}");
 
+        // for e in hir::db::ParseMacroExpansionQuery.in_db(db).entries::<Vec<_>>() {
+
+        //     let val = db.parse_macro_expansion(e.key).value.0;
+
+        //     total_macro_file_size += syntax_len(val.syntax_node())
+
+        // }
+
+        // eprintln!("source files: {total_file_size}, macro files: {total_macro_file_size}");
         eprintln!("{:<20} {}", "Item Tree Collection:", item_tree_time);
         report_metric("item tree time", item_tree_time.time.as_millis() as u64, "ms");
         eprintln!("  Total Statistics:");
         }
         let term_search_time = sw.elapsed();
 
-        bar.println(format!(
+        bar
+            .println(format!(
             "Tail Expr syntactic hits: {}/{} ({}%)",
             acc.tail_expr_syntax_hits,
             acc.total_tail_exprs,
             percentage(acc.tail_expr_syntax_hits, acc.total_tail_exprs)
         ));
-        bar.println(format!(
+        bar
+            .println(format!(
             "Tail Exprs found: {}/{} ({}%)",
             acc.total_tail_exprs - acc.tail_expr_no_term,
             acc.total_tail_exprs,
                 ));
             }
         }
-        bar.println(format!(
+        bar
+            .println(format!(
             "Term search avg time: {}ms",
             term_search_time.time.as_millis() as u64 / acc.total_tail_exprs
         ));
         eprintln!("{:<20} {} ({} files)", "IDE:", ide_time, file_ids.len());
     }
 
-    fn should_process(&self, db: &RootDatabase, body_id: DefWithBody, module: hir::Module) -> bool {
+    fn should_process(
+        &self,
+        db: &RootDatabase,
+        body_id: DefWithBody,
+        module: hir::Module,
+    ) -> bool {
         if let Some(only_name) = self.only.as_deref() {
             let name = body_id.name(db).unwrap_or_else(Name::missing);
 
     let path = vfs.file_path(original_range.file_id.file_id(db));
     let line_index = db.line_index(original_range.file_id.file_id(db));
     let text_range = original_range.range;
-    let (start, end) =
-        (line_index.line_col(text_range.start()), line_index.line_col(text_range.end()));
+    let (start, end) = (line_index.line_col(text_range.start()), line_index.line_col(text_range.end()));
     format!("{path},{}:{},{}:{}", start.line + 1, start.col, end.line + 1, end.col)
 }
 
     let path = vfs.file_path(original_range.file_id.file_id(db));
     let line_index = db.line_index(original_range.file_id.file_id(db));
     let text_range = original_range.range;
-    let (start, end) =
-        (line_index.line_col(text_range.start()), line_index.line_col(text_range.end()));
+    let (start, end) = (line_index.line_col(text_range.start()), line_index.line_col(text_range.end()));
     format!("{path},{}:{},{}:{}", start.line + 1, start.col, end.line + 1, end.col)
 }
 
         None
     }
 }
+
 fn pat_syntax_range<'a>(
     db: &RootDatabase,
     vfs: &'a Vfs,
             result.push(ch);
         }
 
-        let result = result.chars().rev().collect::<String>();
+        let result = result.chars().rev().collect();
         write!(f, "{result}")
     }
 }
         )
     }
 }
-
 // FIXME(salsa-transition): bring this back whenever we implement
 // Salsa's memory usage tracking to work with tracked functions.
 // fn syntax_len(node: SyntaxNode) -> usize {