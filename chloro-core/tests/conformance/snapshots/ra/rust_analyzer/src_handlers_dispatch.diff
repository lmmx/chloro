COMPARISON DIFF
============================================================

Original size: 15570 bytes
Chloro size:   15539 bytes
Rustfmt size:  15839 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! See [RequestDispatcher].
+
 use std::{
     fmt::{self, Debug},
     panic, thread,
             if let Some(lsp_server::Request { id, .. }) =
                 self.req.take_if(|it| it.method == R::METHOD)
             {
-                self.global_state
-                    .respond(lsp_server::Response::new_ok(id, R::Result::default()));
+                self.global_state.respond(lsp_server::Response::new_ok(id, R::Result::default()));
             }
             return self;
         }
             if let Some(lsp_server::Request { id, .. }) =
                 self.req.take_if(|it| it.method == R::METHOD)
             {
-                self.global_state
-                    .respond(lsp_server::Response::new_ok(id, default()));
+                self.global_state.respond(lsp_server::Response::new_ok(id, default()));
             }
             return self;
         }
     {
         if !self.global_state.vfs_done {
             if let Some((request, params, _)) = self.parse::<R>() {
-                self.global_state
-                    .respond(lsp_server::Response::new_ok(request.id, &params))
+                self.global_state.respond(lsp_server::Response::new_ok(request.id, &params))
             }
             return self;
         }
             if let Some(lsp_server::Request { id, .. }) =
                 self.req.take_if(|it| it.method == R::METHOD)
             {
-                self.global_state
-                    .respond(lsp_server::Response::new_ok(id, R::Result::default()));
+                self.global_state.respond(lsp_server::Response::new_ok(id, R::Result::default()));
             }
             return self;
         }
                 Err(_cancelled) if ALLOW_RETRYING => Task::Retry(req),
                 Err(_cancelled) => {
                     let error = on_cancelled();
-                    Task::Response(Response {
-                        id: req.id,
-                        result: None,
-                        error: Some(error),
-                    })
+                    Task::Response(Response { id: req.id, result: None, error: Some(error) })
                 }
             }
         });
         let res = crate::from_json(R::METHOD, &req.params);
         match res {
             Ok(params) => {
-                let panic_context = format!(
-                    "\nversion: {}\nrequest: {} {params:#?}",
-                    version(),
-                    R::METHOD
-                );
+                let panic_context =
+                    format!("\nversion: {}\nrequest: {} {params:#?}", version(), R::METHOD);
                 Some((req, params, panic_context))
             }
             Err(err) => {
                 return Err(HandlerCancelledError::Inner(*cancelled));
             };
 
-            Ok(lsp_server::Response::new_err(
-                id,
-                lsp_server::ErrorCode::InternalError as i32,
-                message,
-            ))
+            Ok(
+                lsp_server::Response::new_err(id, lsp_server::ErrorCode::InternalError as i32, message),
+            )
         }
     }
 }
 
         tracing::debug!(?params);
 
-        let _pctx = DbPanicContext::enter(format!(
-            "\nversion: {}\nnotification: {}",
-            version(),
-            N::METHOD
-        ));
+        let _pctx =
+            DbPanicContext::enter(format!("\nversion: {}\nnotification: {}", version(), N::METHOD));
         if let Err(e) = f(self.global_state, params) {
             tracing::error!(handler = %N::METHOD, error = %e, "notification handler failed");
         }