COMPARISON DIFF
============================================================

Original size: 13066 bytes
Chloro size:   12831 bytes
Rustfmt size:  13097 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! Defines database & queries for name resolution.
+
 use base_db::{Crate, RootQueryDb, SourceDatabase};
 use either::Either;
 use hir_expand::{
 };
 use intern::sym;
 use la_arena::ArenaMap;
-use syntax::{ast, AstPtr};
+use salsa::plumbing::AsId;
+use syntax::{AstPtr, ast};
 use triomphe::Arc;
 
 use crate::{
     attr::{Attrs, AttrsWithOwner},
-    expr_store::{
-        scope::ExprScopes, Body, BodySourceMap, ExpressionStore, ExpressionStoreSourceMap,
-    },
+    expr_store::{scope::ExprScopes, Body, BodySourceMap, ExpressionStore, ExpressionStoreSourceMap},
     hir::generics::GenericParams,
     import_map::ImportMap,
     item_tree::{file_item_tree_query, ItemTree},
     TypeAliasLoc, UnionId, UnionLoc, UseId, UseLoc, VariantId,
 };
 
-use salsa::plumbing::AsId;
-
 #[query_group::query_group(InternDatabaseStorage)]
-pub trait InternDatabase: RootQueryDb {
-    // region: items
+pub trait InternDatabase {
     #[salsa::interned]
     fn intern_use(&self, loc: UseLoc) -> UseId;
 
 }
 
 #[query_group::query_group]
-pub trait DefDatabase: InternDatabase + ExpandDatabase + SourceDatabase {
+pub trait DefDatabase {
     /// Whether to expand procedural macros during name resolution.
     #[salsa::input]
     fn expand_proc_attr_macros(&self) -> bool;
     /// Turns a MacroId into a MacroDefId, describing the macro's definition post name resolution.
     #[salsa::invoke(macro_def)]
     fn macro_def(&self, m: MacroId) -> MacroDefId;
-
     // region:data
 
     #[salsa::tracked]
         &self,
         e: TypeAliasId,
     ) -> (Arc<TypeAliasSignature>, Arc<ExpressionStoreSourceMap>);
-
     // endregion:data
 
     #[salsa::invoke(Body::body_with_source_map_query)]
     fn generic_params_and_store_and_source_map(
         &self,
         def: GenericDefId,
-    ) -> (
-        Arc<GenericParams>,
-        Arc<ExpressionStore>,
-        Arc<ExpressionStoreSourceMap>,
-    );
-
+    ) -> (Arc<GenericParams>, Arc<ExpressionStore>, Arc<ExpressionStoreSourceMap>);
     // region:attrs
 
     #[salsa::invoke(Attrs::fields_attrs_query)]
     fn fields_attrs(&self, def: VariantId) -> Arc<ArenaMap<LocalFieldId, Attrs>>;
 
-    // should this really be a query?
     #[salsa::invoke(crate::attr::fields_attrs_source_map)]
     fn fields_attrs_source_map(
         &self,
         def: VariantId,
     ) -> Arc<ArenaMap<LocalFieldId, AstPtr<Either<ast::TupleField, ast::RecordField>>>>;
 
-    // FIXME: Make this a non-interned query.
     #[salsa::invoke_interned(AttrsWithOwner::attrs_query)]
     fn attrs(&self, def: AttrDefId) -> Attrs;
 
     #[salsa::transparent]
     #[salsa::invoke(lang_item::lang_attr)]
     fn lang_attr(&self, def: AttrDefId) -> Option<LangItem>;
-
     // endregion:attrs
 
     #[salsa::invoke(ImportMap::import_map_query)]
     fn import_map(&self, krate: Crate) -> Arc<ImportMap>;
-
     // region:visibilities
 
     #[salsa::invoke(visibility::field_visibilities_query)]
 
     #[salsa::invoke(visibility::assoc_visibility_query)]
     fn assoc_visibility(&self, def: AssocItemId) -> Visibility;
-
     // endregion:visibilities
 
     #[salsa::invoke(crate::lang_item::notable_traits_in_deps)]
     fn notable_traits_in_deps(&self, krate: Crate) -> Arc<[Arc<[TraitId]>]>;
+
     #[salsa::invoke(crate::lang_item::crate_notable_traits)]
     fn crate_notable_traits(&self, krate: Crate) -> Option<Arc<[TraitId]>>;
 
     fn include_macro_invoc(&self, crate_id: Crate) -> Arc<[(MacroCallId, EditionedFileId)]>;
 }
 
-// return: macro call id and include file id
 fn include_macro_invoc(
     db: &dyn DefDatabase,
     krate: Crate,
             }
         }
     }
-
     false
 }
 
             MacroExpander::BuiltInEager(it) => MacroDefKind::BuiltInEager(in_file, it),
         }
     };
-
     match id {
         MacroId::Macro2Id(it) => {
             let loc: Macro2Loc = it.lookup(db);