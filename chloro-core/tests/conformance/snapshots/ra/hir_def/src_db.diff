COMPARISON DIFF
============================================================

Original size: 13066 bytes
Chloro size:   12836 bytes
Rustfmt size:  13097 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! Defines database & queries for name resolution.
+
 use base_db::{Crate, RootQueryDb, SourceDatabase};
 use either::Either;
 use hir_expand::{
 };
 use intern::sym;
 use la_arena::ArenaMap;
+use salsa::plumbing::AsId;
 use syntax::{ast, AstPtr};
 use triomphe::Arc;
 
 use crate::{
     attr::{Attrs, AttrsWithOwner},
-    expr_store::{
-        scope::ExprScopes, Body, BodySourceMap, ExpressionStore, ExpressionStoreSourceMap,
-    },
+    expr_store::{scope::ExprScopes, Body, BodySourceMap, ExpressionStore, ExpressionStoreSourceMap},
     hir::generics::GenericParams,
     import_map::ImportMap,
     item_tree::{file_item_tree_query, ItemTree},
     TypeAliasLoc, UnionId, UnionLoc, UseId, UseLoc, VariantId,
 };
 
-use salsa::plumbing::AsId;
-
 #[query_group::query_group(InternDatabaseStorage)]
-pub trait InternDatabase: RootQueryDb {
-    // region: items
+pub trait InternDatabase {
     #[salsa::interned]
     fn intern_use(&self, loc: UseLoc) -> UseId;
 
 }
 
 #[query_group::query_group]
-pub trait DefDatabase: InternDatabase + ExpandDatabase + SourceDatabase {
+pub trait DefDatabase {
     /// Whether to expand procedural macros during name resolution.
     #[salsa::input]
     fn expand_proc_attr_macros(&self) -> bool;
     fn generic_params_and_store_and_source_map(
         &self,
         def: GenericDefId,
-    ) -> (
-        Arc<GenericParams>,
-        Arc<ExpressionStore>,
-        Arc<ExpressionStoreSourceMap>,
-    );
+    ) -> (Arc<GenericParams>, Arc<ExpressionStore>, Arc<ExpressionStoreSourceMap>);
 
     // region:attrs
 
     #[salsa::invoke(Attrs::fields_attrs_query)]
     fn fields_attrs(&self, def: VariantId) -> Arc<ArenaMap<LocalFieldId, Attrs>>;
 
-    // should this really be a query?
     #[salsa::invoke(crate::attr::fields_attrs_source_map)]
     fn fields_attrs_source_map(
         &self,
         def: VariantId,
     ) -> Arc<ArenaMap<LocalFieldId, AstPtr<Either<ast::TupleField, ast::RecordField>>>>;
 
-    // FIXME: Make this a non-interned query.
     #[salsa::invoke_interned(AttrsWithOwner::attrs_query)]
     fn attrs(&self, def: AttrDefId) -> Attrs;
 
 
     #[salsa::invoke(crate::lang_item::notable_traits_in_deps)]
     fn notable_traits_in_deps(&self, krate: Crate) -> Arc<[Arc<[TraitId]>]>;
+
     #[salsa::invoke(crate::lang_item::crate_notable_traits)]
     fn crate_notable_traits(&self, krate: Crate) -> Option<Arc<[TraitId]>>;
 
     fn include_macro_invoc(&self, crate_id: Crate) -> Arc<[(MacroCallId, EditionedFileId)]>;
 }
 
-// return: macro call id and include file id
 fn include_macro_invoc(
     db: &dyn DefDatabase,
     krate: Crate,
     match id {
         MacroId::Macro2Id(it) => {
             let loc: Macro2Loc = it.lookup(db);
-
             MacroDefId {
                 krate: loc.container.krate,
                 kind: kind(loc.expander, loc.id.file_id, loc.id.value.upcast()),
         }
         MacroId::MacroRulesId(it) => {
             let loc: MacroRulesLoc = it.lookup(db);
-
             MacroDefId {
                 krate: loc.container.krate,
                 kind: kind(loc.expander, loc.id.file_id, loc.id.value.upcast()),
         }
         MacroId::ProcMacroId(it) => {
             let loc = it.lookup(db);
-
             MacroDefId {
                 krate: loc.container.krate,
                 kind: MacroDefKind::ProcMacro(loc.id, loc.expander, loc.kind),