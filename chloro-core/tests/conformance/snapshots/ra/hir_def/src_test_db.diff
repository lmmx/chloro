COMPARISON DIFF
============================================================

Original size: 10503 bytes
Chloro size:   10197 bytes
Rustfmt size:  10686 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 }
 
 #[salsa_macros::db]
-impl salsa::Database for TestDB {}
+impl salsa::Database for TestDB {
+}
 
 impl fmt::Debug for TestDB {
     fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
     }
 }
 
-impl panic::RefUnwindSafe for TestDB {}
+impl panic::RefUnwindSafe for TestDB {
+}
 
 #[salsa_macros::db]
 impl SourceDatabase for TestDB {
     }
 
     fn nonce_and_revision(&self) -> (Nonce, salsa::Revision) {
-        (
-            self.nonce,
-            salsa::plumbing::ZalsaDatabase::zalsa(self).current_revision(),
-        )
+        (self.nonce, salsa::plumbing::ZalsaDatabase::zalsa(self).current_revision())
     }
 }
 
 impl TestDB {
     pub(crate) fn fetch_test_crate(&self) -> Crate {
         let all_crates = self.all_crates();
-        all_crates
-            .iter()
-            .copied()
-            .find(|&krate| {
-                krate
-                    .extra_data(self)
-                    .display_name
-                    .as_ref()
-                    .map(|it| it.canonical_name().as_str())
-                    == Some("ra_test_fixture")
-            })
-            .unwrap_or(*all_crates.last().unwrap())
+        all_crates.iter().copied().find(|&krate| {
+            krate.extra_data(self).display_name.as_ref().map(|it| it.canonical_name().as_str()) == Some("ra_test_fixture")
+        }).unwrap_or(
+            *all_crates.last().unwrap(),
+        )
     }
 
     pub(crate) fn module_for_file(&self, file_id: FileId) -> ModuleId {
             match new_map {
                 Some(new_block) if !std::ptr::eq(&new_block, &def_map) => {
                     def_map = new_block;
-                }
+                },
                 _ => {
-                    // FIXME: handle `mod` inside block expression
                     return def_map.module_id(DefMap::ROOT);
-                }
+                },
             }
         }
     }
             });
 
         for scope in scope_iter {
-            let mut containing_blocks = scopes
-                .scope_chain(Some(scope))
-                .filter_map(|scope| scopes.block(scope));
+            let mut containing_blocks =
+                scopes.scope_chain(Some(scope)).filter_map(|scope| scopes.block(scope));
 
-            if let Some(block) = containing_blocks
-                .next()
-                .map(|block| block_def_map(self, block))
-            {
+            if let Some(block) = containing_blocks.next().map(|block| block_def_map(self, block)) {
                 return Some(block);
             }
         }
 
     pub(crate) fn log_executed(&self, f: impl FnOnce()) -> Vec<String> {
         let events = self.log(f);
-        events
-            .into_iter()
-            .filter_map(|e| match e.kind {
-                // This is pretty horrible, but `Debug` is the only way to inspect
-                // QueryDescriptor at the moment.
-                salsa::EventKind::WillExecute { database_key } => {
-                    let ingredient = (self as &dyn salsa::Database)
+        events.into_iter().filter_map(|e| match e.kind {
+            salsa::EventKind::WillExecute { database_key } => {
+                let ingredient = (self as &dyn salsa::Database)
                         .ingredient_debug_name(database_key.ingredient_index());
-                    Some(ingredient.to_string())
-                }
-                _ => None,
-            })
-            .collect()
+                Some(ingredient.to_string())
+            },
+            _ => None,
+        }).collect(
+        )
     }
 }