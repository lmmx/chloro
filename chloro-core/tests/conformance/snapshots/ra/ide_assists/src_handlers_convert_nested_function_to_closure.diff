COMPARISON DIFF
============================================================

Original size: 5052 bytes
Chloro size:   4570 bytes
Rustfmt size:  5151 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 use ide_db::assists::AssistId;
 use syntax::ast::{self, HasGenericParams, HasName};
 use syntax::{AstNode, SyntaxKind};
 
 use crate::assist_context::{AssistContext, Assists};
 
-// Assist: convert_nested_function_to_closure
-//
-// Converts a function that is defined within the body of another function into a closure.
-//
-// ```
-// fn main() {
-//     fn fo$0o(label: &str, number: u64) {
-//         println!("{}: {}", label, number);
-//     }
-//
-//     foo("Bar", 100);
-// }
-// ```
-// ->
-// ```
-// fn main() {
-//     let foo = |label: &str, number: u64| {
-//         println!("{}: {}", label, number);
-//     };
-//
-//     foo("Bar", 100);
-// }
-// ```
 pub(crate) fn convert_nested_function_to_closure(
     acc: &mut Assists,
     ctx: &AssistContext<'_>,
 ) -> Option<()> {
     let name = ctx.find_node_at_offset::<ast::Name>()?;
     let function = name.syntax().parent().and_then(ast::Fn::cast)?;
-
     if !is_nested_function(&function) || is_generic(&function) || has_modifiers(&function) {
         return None;
     }
-
     let target = function.syntax().text_range();
     let body = function.body()?;
     let name = function.name()?;
     let param_list = function.param_list()?;
-
     acc.add(
         AssistId::refactor_rewrite("convert_nested_function_to_closure"),
         "Convert nested function to closure",
 
 /// Returns whether the given function is nested within the body of another function.
 fn is_nested_function(function: &ast::Fn) -> bool {
-    function
-        .syntax()
-        .ancestors()
-        .skip(1)
-        .find_map(ast::Item::cast)
-        .is_some_and(|it| {
-            matches!(
-                it,
-                ast::Item::Fn(_) | ast::Item::Static(_) | ast::Item::Const(_)
-            )
-        })
+    function.syntax().ancestors().skip(1).find_map(ast::Item::cast).is_some_and(|it| {
+        matches!(it, ast::Item::Fn(_) | ast::Item::Static(_) | ast::Item::Const(_))
+    })
 }
 
 /// Returns whether the given nested function has generic parameters.
 #[cfg(test)]
 mod tests {
     use crate::tests::{check_assist, check_assist_not_applicable};
-
     use super::convert_nested_function_to_closure;
-
     #[test]
     fn convert_nested_function_to_closure_works() {
         check_assist(
             "#,
         );
     }
-
     #[test]
     fn convert_nested_function_to_closure_works_with_existing_semicolon() {
         check_assist(
             "#,
         );
     }
-
     #[test]
     fn convert_nested_function_to_closure_is_not_suggested_on_top_level_function() {
         check_assist_not_applicable(
             "#,
         );
     }
-
     #[test]
     fn convert_nested_function_to_closure_is_not_suggested_when_cursor_off_name() {
         check_assist_not_applicable(
             "#,
         );
     }
-
     #[test]
     fn convert_nested_function_to_closure_is_not_suggested_if_function_has_generic_params() {
         check_assist_not_applicable(
             "#,
         );
     }
-
     #[test]
     fn convert_nested_function_to_closure_is_not_suggested_if_function_has_modifier() {
         check_assist_not_applicable(