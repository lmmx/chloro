COMPARISON DIFF
============================================================

Original size: 45712 bytes
Chloro size:   45564 bytes
Rustfmt size:  45712 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 use either::Either;
 use ide_db::{
     famous_defs::FamousDefs,
     syntax_helpers::node_ext::{for_each_tail_expr, walk_expr},
 };
 use syntax::{
-    AstNode, NodeOrToken, SyntaxKind,
-    ast::{self, HasArgList, HasGenericArgs, syntax_factory::SyntaxFactory},
-    match_ast,
+    ast::{self, syntax_factory::SyntaxFactory, HasArgList, HasGenericArgs},
+    match_ast, AstNode, NodeOrToken, SyntaxKind,
 };
 
 use crate::{AssistContext, AssistId, Assists};
 
+
 // Assist: unwrap_option_return_type
+
 //
+
 // Unwrap the function's return type.
+
 //
+
 // ```
+
 // # //- minicore: option
+
 // fn foo() -> Option<i32>$0 { Some(42i32) }
+
 // ```
+
 // ->
+
 // ```
+
 // fn foo() -> i32 { 42i32 }
+
 // ```
 
 // Assist: unwrap_result_return_type
+
 //
+
 // Unwrap the function's return type.
+
 //
-// ```
-// # //- minicore: result
-// fn foo() -> Result<i32>$0 { Ok(42i32) }
-// ```
-// ->
-// ```
-// fn foo() -> i32 { 42i32 }
+
 // ```
 
+// # //- minicore: result
+
+// fn foo() -> Result<i32>$0 { Ok(42i32) }
+
+// ```
+
+// ->
+
+// ```
+
+// fn foo() -> i32 { 42i32 }
+
+// ```
 pub(crate) fn unwrap_return_type(acc: &mut Assists, ctx: &AssistContext<'_>) -> Option<()> {
     let ret_type = ctx.find_node_at_offset::<ast::RetType>()?;
     let parent = ret_type.syntax().parent()?;
 
     let happy_type = extract_wrapped_type(type_ref)?;
 
-    acc.add(kind.assist_id(), kind.label(), type_ref.syntax().text_range(), |builder| {
+    acc.add(
+        kind.assist_id(),
+        kind.label(),
+        type_ref.syntax().text_range(),
+        |builder| {
         let mut editor = builder.make_editor(&parent);
         let make = SyntaxFactory::with_mappings();
-
         let mut exprs_to_unwrap = Vec::new();
         let tail_cb = &mut |e: &_| tail_cb_impl(&mut exprs_to_unwrap, e);
         walk_expr(&body_expr, &mut |expr| {
             }
         });
         for_each_tail_expr(&body_expr, tail_cb);
-
         let is_unit_type = is_unit_type(&happy_type);
         if is_unit_type {
             if let Some(NodeOrToken::Token(token)) = ret_type.syntax().next_sibling_or_token()
         } else {
             editor.replace(type_ref.syntax(), happy_type.syntax());
         }
-
         let mut final_placeholder = None;
         for tail_expr in exprs_to_unwrap {
             match &tail_expr {
                 _ => (),
             }
         }
-
         if let Some(cap) = ctx.config.snippet_cap
             && let Some(final_placeholder) = final_placeholder
         {
             editor.add_annotation(final_placeholder.syntax(), builder.make_tabstop_after(cap));
         }
-
         editor.add_mappings(make.finish_with_mappings());
         builder.add_file_edits(ctx.vfs_file_id(), editor);
-    })
+    },
+    )
 }
 
 enum UnwrapperKind {
             if let Some(break_expr_arg) = break_expr.expr() {
                 for_each_tail_expr(&break_expr_arg, &mut |e| tail_cb_impl(acc, e))
             }
-        }
+        },
         ast::Expr::ReturnExpr(_) => {
-            // all return expressions have already been handled by the walk loop
-        }
+        },
         e => acc.push(e.clone()),
     }
 }
 
-// Tries to extract `T` from `Option<T>` or `Result<T, E>`.
 fn extract_wrapped_type(ty: &ast::Type) -> Option<ast::Type> {
     let ast::Type::PathType(path_ty) = ty else {
         return None;
 #[cfg(test)]
 mod tests {
     use crate::tests::{check_assist_by_label, check_assist_not_applicable_by_label};
-
     use super::*;
-
     #[test]
     fn unwrap_option_return_type_simple() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_unit_type() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_none() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_multi_none() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_ending_with_parent() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_break_split_tail() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_bad_cursor() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_bad_cursor_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_closure_non_block() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_already_not_option_std() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_return_type_already_not_option_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_only() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_without_block_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_nested_if() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_await() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_array() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_cast() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_match() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_loop_with_tail() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_loop_in_let_stmt() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_match_return_expr() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_match_deeper() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_tail_block_like_early_return() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_in_tail_position() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_closure() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_simple_with_weird_forms() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_option_return_type_nested_type() {
         check_assist_by_label(
             "Unwrap Option return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_unit_type() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_ending_with_parent() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_break_split_tail() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_bad_cursor() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_bad_cursor_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_closure_non_block() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_already_not_result_std() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_return_type_already_not_result_closure() {
         check_assist_not_applicable_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_only() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_without_block_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_nested_if() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_await() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_array() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_cast() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_match() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_loop_with_tail() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_loop_in_let_stmt() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_match_return_expr() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_match_deeper() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_tail_block_like_early_return() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_in_tail_position() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_closure() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_simple_with_weird_forms() {
         check_assist_by_label(
             "Unwrap Result return type",
         );
     }
-
     #[test]
     fn unwrap_result_return_type_nested_type() {
         check_assist_by_label(