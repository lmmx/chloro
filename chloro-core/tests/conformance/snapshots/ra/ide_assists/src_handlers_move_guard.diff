COMPARISON DIFF
============================================================

Original size: 21223 bytes
Chloro size:   19555 bytes
Rustfmt size:  21223 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 use syntax::{
+    ast::{edit::AstNodeEdit, make, AstNode, BlockExpr, ElseBranch, Expr, IfExpr, MatchArm, Pat},
     SyntaxKind::WHITESPACE,
-    ast::{AstNode, BlockExpr, ElseBranch, Expr, IfExpr, MatchArm, Pat, edit::AstNodeEdit, make},
 };
 
 use crate::{AssistContext, AssistId, Assists};
 
-// Assist: move_guard_to_arm_body
-//
-// Moves match guard into match arm body.
-//
-// ```
-// enum Action { Move { distance: u32 }, Stop }
-//
-// fn handle(action: Action) {
-//     match action {
-//         Action::Move { distance } $0if distance > 10 => foo(),
-//         _ => (),
-//     }
-// }
-// ```
-// ->
-// ```
-// enum Action { Move { distance: u32 }, Stop }
-//
-// fn handle(action: Action) {
-//     match action {
-//         Action::Move { distance } => if distance > 10 {
-//             foo()
-//         },
-//         _ => (),
-//     }
-// }
-// ```
 pub(crate) fn move_guard_to_arm_body(acc: &mut Assists, ctx: &AssistContext<'_>) -> Option<()> {
     let match_arm = ctx.find_node_at_offset::<MatchArm>()?;
     let guard = match_arm.guard()?;
         "Move guard to arm body",
         target,
         |builder| {
-            let mut edit = builder.make_editor(match_arm.syntax());
-            if let Some(element) = space_before_guard
+        let mut edit = builder.make_editor(match_arm.syntax());
+        if let Some(element) = space_before_guard
                 && element.kind() == WHITESPACE
             {
                 edit.delete(element);
             }
-            if let Some(element) = space_after_arrow
+        if let Some(element) = space_after_arrow
                 && element.kind() == WHITESPACE
             {
                 edit.replace(element, make::tokens::single_space());
             }
-
-            edit.delete(guard.syntax());
-            edit.replace(arm_expr.syntax(), if_expr.syntax());
-            builder.add_file_edits(ctx.vfs_file_id(), edit);
-        },
+        edit.delete(guard.syntax());
+        edit.replace(arm_expr.syntax(), if_expr.syntax());
+        builder.add_file_edits(ctx.vfs_file_id(), edit);
+    },
     )
 }
 
-// Assist: move_arm_cond_to_match_guard
-//
-// Moves if expression from match arm body into a guard.
-//
-// ```
-// enum Action { Move { distance: u32 }, Stop }
-//
-// fn handle(action: Action) {
-//     match action {
-//         Action::Move { distance } => $0if distance > 10 { foo() },
-//         _ => (),
-//     }
-// }
-// ```
-// ->
-// ```
-// enum Action { Move { distance: u32 }, Stop }
-//
-// fn handle(action: Action) {
-//     match action {
-//         Action::Move { distance } if distance > 10 => foo(),
-//         _ => (),
-//     }
-// }
-// ```
 pub(crate) fn move_arm_cond_to_match_guard(
     acc: &mut Assists,
     ctx: &AssistContext<'_>,
         "Move condition to match guard",
         replace_node.text_range(),
         |edit| {
-            edit.delete(match_arm.syntax().text_range());
-            // Dedent if if_expr is in a BlockExpr
-            let dedent = if needs_dedent {
+        edit.delete(match_arm.syntax().text_range());
+        let dedent = if needs_dedent {
                 cov_mark::hit!(move_guard_ifelse_in_block);
                 1
             } else {
                 cov_mark::hit!(move_guard_ifelse_else_block);
                 0
             };
-            let then_arm_end = match_arm.syntax().text_range().end();
-            let indent_level = match_arm.indent_level();
-            let spaces = indent_level;
-
-            let mut first = true;
-            for (cond, block) in conds_blocks {
+        let then_arm_end = match_arm.syntax().text_range().end();
+        let indent_level = match_arm.indent_level();
+        let spaces = indent_level;
+        let mut first = true;
+        for (cond, block) in conds_blocks {
                 if !first {
                     edit.insert(then_arm_end, format!("\n{spaces}"));
                 } else {
                     }
                 }
             }
-            if let Some(e) = tail {
-                cov_mark::hit!(move_guard_ifelse_else_tail);
-                let guard = format!("\n{spaces}{match_pat} => ");
-                edit.insert(then_arm_end, guard);
-                let only_expr = e.statements().next().is_none();
-                match &e.tail_expr() {
-                    Some(expr) if only_expr => {
-                        cov_mark::hit!(move_guard_ifelse_expr_only);
-                        edit.insert(then_arm_end, expr.syntax().text());
-                        edit.insert(then_arm_end, ",");
-                    }
-                    _ => {
-                        let to_insert = e.dedent(dedent.into()).syntax().text();
-                        edit.insert(then_arm_end, to_insert)
-                    }
-                }
-            } else {
-                // There's no else branch. Add a pattern without guard, unless the following match
-                // arm is `_ => ...`
-                cov_mark::hit!(move_guard_ifelse_notail);
-                match match_arm.syntax().next_sibling().and_then(MatchArm::cast) {
-                    Some(next_arm)
-                        if matches!(next_arm.pat(), Some(Pat::WildcardPat(_)))
-                            && next_arm.guard().is_none() =>
-                    {
-                        cov_mark::hit!(move_guard_ifelse_has_wildcard);
-                    }
-                    _ => edit.insert(then_arm_end, format!("\n{spaces}{match_pat} => {{}}")),
-                }
+        if let Some(e) = tail {
+            cov_mark::hit!(move_guard_ifelse_else_tail);
+            let guard = format!("\n{spaces}{match_pat} => ");
+            edit.insert(then_arm_end, guard);
+            let only_expr = e.statements().next().is_none();
+            match &e.tail_expr() {
+                Some(expr) if only_expr => {
+                    cov_mark::hit!(move_guard_ifelse_expr_only);
+                    edit.insert(then_arm_end, expr.syntax().text());
+                    edit.insert(then_arm_end, ",");
+                },
+                _ => {
+                    let to_insert = e.dedent(dedent.into()).syntax().text();
+                    edit.insert(then_arm_end, to_insert)
+                },
             }
-        },
+        } else {
+            cov_mark::hit!(move_guard_ifelse_notail);
+            match match_arm.syntax().next_sibling().and_then(MatchArm::cast) {
+                Some(next_arm) if matches!(next_arm.pat(), Some(Pat::WildcardPat(_))) && next_arm.guard().is_none() => {
+                    cov_mark::hit!(move_guard_ifelse_has_wildcard);
+                },
+                _ => edit.insert(then_arm_end, format!("\n{spaces}{match_pat} => {{}}")),
+            }
+        }
+    },
     )
 }
 
-// Parses an if-else-if chain to get the conditions and the then branches until we encounter an else
-// branch or the end.
 fn parse_if_chain(if_expr: IfExpr) -> Option<(Vec<(Expr, BlockExpr)>, Option<BlockExpr>)> {
     let mut conds_blocks = Vec::new();
     let mut curr_if = if_expr;
 #[cfg(test)]
 mod tests {
     use super::*;
-
     use crate::tests::{check_assist, check_assist_not_applicable, check_assist_target};
-
     #[test]
     fn move_guard_to_arm_body_range() {
         cov_mark::check!(move_guard_inapplicable_in_arm_body);
             r#"if x > 10"#,
         );
     }
-
     #[test]
     fn move_guard_to_arm_body_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_let_guard_to_arm_body_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_multiline_guard_to_arm_body_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_guard_to_arm_body_works_complex_match() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_in_block_to_match_guard_works() {
         cov_mark::check!(move_guard_ifelse_has_wildcard);
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_in_block_to_match_guard_no_wildcard_works() {
         cov_mark::check_count!(move_guard_ifelse_has_wildcard, 0);
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_in_block_to_match_guard_wildcard_guard_works() {
         cov_mark::check_count!(move_guard_ifelse_has_wildcard, 0);
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_in_block_to_match_guard_add_comma_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_if_let_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_if_empty_body_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_if_multiline_body_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_in_block_to_match_guard_if_multiline_body_works() {
         check_assist(
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_works() {
         check_assist(
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_block_works() {
         cov_mark::check!(move_guard_ifelse_expr_only);
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_else_if_empty_body_works() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_multiline_works() {
         check_assist(
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_multiline_else_works() {
         cov_mark::check!(move_guard_ifelse_else_block);
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_multiline_else_block_works() {
         cov_mark::check!(move_guard_ifelse_in_block);
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_last_arm_works() {
         check_assist(
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_with_else_comma_works() {
         check_assist(
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_elseif() {
         check_assist(
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_elseif_in_block() {
         cov_mark::check!(move_guard_ifelse_in_block);
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_elseif_chain() {
         cov_mark::check!(move_guard_ifelse_else_tail);
 "#,
         )
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_elseif_iflet() {
         check_assist(
 }"#,
         );
     }
-
     #[test]
     fn move_arm_cond_to_match_guard_elseif_notail() {
         cov_mark::check!(move_guard_ifelse_notail);