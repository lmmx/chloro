COMPARISON DIFF
============================================================

Original size: 33414 bytes
Chloro size:   32268 bytes
Rustfmt size:  33414 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 use hir::{AsAssocItem, HasVisibility, ModuleDef, Visibility};
 use ide_db::assists::AssistId;
 use itertools::Itertools;
 use stdx::{format_to, to_lower_snake_case};
 use syntax::{
-    AstNode, AstToken, Edition,
     algo::skip_whitespace_token,
-    ast::{self, HasDocComments, HasGenericArgs, HasName, edit::IndentLevel},
-    match_ast,
+    ast::{self, edit::IndentLevel, HasDocComments, HasGenericArgs, HasName},
+    match_ast, AstNode, AstToken, Edition,
 };
 
 use crate::assist_context::{AssistContext, Assists};
 
-// Assist: generate_documentation_template
-//
-// Adds a documentation template above a function definition / declaration.
-//
-// ```
-// pub struct S;
-// impl S {
-//     pub unsafe fn set_len$0(&mut self, len: usize) -> Result<(), std::io::Error> {
-//         /* ... */
-//     }
-// }
-// ```
-// ->
-// ```
-// pub struct S;
-// impl S {
-//     /// Sets the length of this [`S`].
-//     ///
-//     /// # Errors
-//     ///
-//     /// This function will return an error if .
-//     ///
-//     /// # Safety
-//     ///
-//     /// .
-//     pub unsafe fn set_len(&mut self, len: usize) -> Result<(), std::io::Error> {
-//         /* ... */
-//     }
-// }
-// ```
 pub(crate) fn generate_documentation_template(
     acc: &mut Assists,
     ctx: &AssistContext<'_>,
     )
 }
 
-// Assist: generate_doc_example
-//
-// Generates a rustdoc example when editing an item's documentation.
-//
-// ```
-// /// Adds two numbers.$0
-// pub fn add(a: i32, b: i32) -> i32 { a + b }
-// ```
-// ->
-// ```
-// /// Adds two numbers.
-// ///
-// /// # Examples
-// ///
-// /// ```
-// /// use ra_test_fixture::add;
-// ///
-// /// assert_eq!(add(a, b), );
-// /// ```
-// pub fn add(a: i32, b: i32) -> i32 { a + b }
-// ```
 pub(crate) fn generate_doc_example(acc: &mut Assists, ctx: &AssistContext<'_>) -> Option<()> {
     let tok: ast::Comment = ctx.find_token_at_offset()?;
     let node = tok.syntax().parent()?;
 fn is_public(ast_func: &ast::Fn, ctx: &AssistContext<'_>) -> Option<bool> {
     let hir_func = ctx.sema.to_def(ast_func)?;
     Some(
-        hir_func.visibility(ctx.db()) == Visibility::Public
-            && all_parent_mods_public(&hir_func, ctx),
+        hir_func.visibility(ctx.db()) == Visibility::Public && all_parent_mods_public(&hir_func, ctx),
     )
 }
 
 
 /// Helper function to determine if the function is in a trait implementation
 fn is_in_trait_impl(ast_func: &ast::Fn, ctx: &AssistContext<'_>) -> bool {
-    ctx.sema
-        .to_def(ast_func)
-        .and_then(|hir_func| hir_func.as_assoc_item(ctx.db()))
-        .and_then(|assoc_item| assoc_item.implemented_trait(ctx.db()))
-        .is_some()
+    ctx.sema.to_def(ast_func).and_then(|hir_func| hir_func.as_assoc_item(ctx.db())).and_then(
+        |assoc_item| assoc_item.implemented_trait(ctx.db()),
+    ).is_some(
+    )
 }
 
 /// Helper function to determine if the function definition is in a trait definition
 fn is_in_trait_def(ast_func: &ast::Fn, ctx: &AssistContext<'_>) -> bool {
-    ctx.sema
-        .to_def(ast_func)
-        .and_then(|hir_func| hir_func.as_assoc_item(ctx.db()))
-        .and_then(|assoc_item| assoc_item.container_trait(ctx.db()))
-        .is_some()
+    ctx.sema.to_def(ast_func).and_then(|hir_func| hir_func.as_assoc_item(ctx.db())).and_then(
+        |assoc_item| assoc_item.container_trait(ctx.db()),
+    ).is_some(
+    )
 }
 
 /// Returns `None` if no `self` at all, `Some(true)` if there is `&mut self` else `Some(false)`
 
 /// Helper function to build the list of `&mut` parameters
 fn ref_mut_params(param_list: &ast::ParamList) -> Vec<String> {
-    param_list
-        .params()
-        .filter_map(|param| match is_a_ref_mut_param(&param) {
+    param_list.params().filter_map(|param| match is_a_ref_mut_param(&param) {
             // Maybe better filter the param name (to do this maybe extract a function from
             // `arguments_from_params`?) in case of a `mut a: &mut T`. Anyway managing most (not
             // all) cases might be enough, the goal is just to produce a template.
             true => Some(param.pat()?.to_string()),
             false => None,
-        })
-        .collect()
+        }).collect(
+    )
 }
 
 /// Helper function to build the comma-separated list of arguments of the function
 
 /// Helper function to count the parameters including `self`
 fn count_parameters(param_list: &ast::ParamList) -> usize {
-    param_list.params().count() + if param_list.self_param().is_some() { 1 } else { 0 }
+    param_list.params().count() + if param_list.self_param().is_some() {
+        1
+    } else {
+        0
+    }
 }
 
 /// Helper function to transform lines of documentation into a Rust code documentation
 
 /// Helper function to determine if the function returns some data
 fn returns_a_value(ast_func: &ast::Fn, ctx: &AssistContext<'_>) -> bool {
-    ctx.sema
-        .to_def(ast_func)
-        .map(|hir_func| hir_func.ret_type(ctx.db()))
-        .map(|ret_ty| !ret_ty.is_unit() && !ret_ty.is_never())
-        .unwrap_or(false)
+    ctx.sema.to_def(ast_func).map(|hir_func| hir_func.ret_type(ctx.db())).map(
+        |ret_ty| !ret_ty.is_unit() && !ret_ty.is_never(),
+    ).unwrap_or(
+        false,
+    )
 }
 
 #[cfg(test)]
 mod tests {
     use crate::tests::{check_assist, check_assist_not_applicable};
-
     use super::*;
-
     #[test]
     fn not_applicable_on_function_calls() {
         check_assist_not_applicable(
 "#,
         )
     }
-
     #[test]
     fn not_applicable_in_trait_impl() {
         check_assist_not_applicable(
 "#,
         )
     }
-
     #[test]
     fn not_applicable_if_function_already_documented() {
         check_assist_not_applicable(
 "#,
         );
     }
-
     #[test]
     fn supports_noop_function() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn is_applicable_if_function_is_private() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn no_doc_example_for_private_fn() {
         check_assist_not_applicable(
 "#,
         );
     }
-
     #[test]
     fn supports_a_parameter() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn detects_unsafe_function() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn guesses_panic_macro_can_panic() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn guesses_debug_assert_macro_cannot_panic() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn guesses_assert_macro_can_panic() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn guesses_assert_eq_macro_can_panic() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn guesses_unwrap_can_panic() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn guesses_expect_can_panic() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn checks_output_in_example() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn detects_result_output() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn checks_ref_mut_in_example() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn stores_result_if_at_least_3_params() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn supports_fn_in_mods() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn supports_fn_in_impl() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn supports_unsafe_fn_in_trait() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn supports_fn_in_trait_with_default_panicking() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn supports_fn_in_trait_returning_result() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn detects_new() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn removes_one_lifetime_from_description() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn removes_all_lifetimes_from_description() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn removes_all_lifetimes_and_brackets_from_description() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn detects_new_with_self() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn supports_method_call() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn checks_modified_self_param() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn generates_intro_for_getters() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn no_getter_intro_for_prefixed_methods() {
         check_assist(
 "#,
         );
     }
-
     #[test]
     fn generates_intro_for_setters() {
         check_assist(