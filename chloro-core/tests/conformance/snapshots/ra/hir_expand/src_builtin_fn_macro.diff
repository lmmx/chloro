COMPARISON DIFF
============================================================

Original size: 32290 bytes
Chloro size:   30941 bytes
Rustfmt size:  32290 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 use syntax_bridge::syntax_node_to_token_tree;
 
 use crate::{
-    EditionedFileId, ExpandError, ExpandResult, Lookup as _, MacroCallId,
-    builtin::quote::{WithDelimiter, dollar_crate},
+    builtin::quote::{dollar_crate, WithDelimiter},
     db::ExpandDatabase,
     hygiene::{span_with_call_site_ctxt, span_with_def_site_ctxt},
     name,
     span_map::SpanMap,
     tt::{self, DelimSpan, TtElement, TtIter},
+    EditionedFileId, ExpandError, ExpandResult, Lookup as _, MacroCallId,
 };
 
 macro_rules! register_builtin {
 ) -> Option<Either<BuiltinFnLikeExpander, EagerExpander>> {
     find_by_name(ident)
 }
-
-register_builtin! {
-    BuiltinFnLikeExpander:
-    (column, Column) => line_expand,
-    (file, File) => file_expand,
-    (line, Line) => line_expand,
-    (module_path, ModulePath) => module_path_expand,
-    (assert, Assert) => assert_expand,
-    (stringify, Stringify) => stringify_expand,
-    (asm, Asm) => asm_expand,
-    (global_asm, GlobalAsm) => global_asm_expand,
-    (naked_asm, NakedAsm) => naked_asm_expand,
-    (cfg_select, CfgSelect) => cfg_select_expand,
-    (cfg, Cfg) => cfg_expand,
-    (core_panic, CorePanic) => panic_expand,
-    (std_panic, StdPanic) => panic_expand,
-    (unreachable, Unreachable) => unreachable_expand,
-    (log_syntax, LogSyntax) => log_syntax_expand,
-    (trace_macros, TraceMacros) => trace_macros_expand,
-    (format_args, FormatArgs) => format_args_expand,
-    (const_format_args, ConstFormatArgs) => format_args_expand,
-    (format_args_nl, FormatArgsNl) => format_args_nl_expand,
-    (quote, Quote) => quote_expand,
-
-    EagerExpander:
-    (compile_error, CompileError) => compile_error_expand,
-    (concat, Concat) => concat_expand,
-    (concat_bytes, ConcatBytes) => concat_bytes_expand,
-    (include, Include) => include_expand,
-    (include_bytes, IncludeBytes) => include_bytes_expand,
-    (include_str, IncludeStr) => include_str_expand,
-    (env, Env) => env_expand,
-    (option_env, OptionEnv) => option_env_expand
-}
-
 fn mk_pound(span: Span) -> tt::Leaf {
     crate::tt::Leaf::Punct(crate::tt::Punct { char: '#', spacing: crate::tt::Spacing::Alone, span })
 }
     let call_site_span = span_with_call_site_ctxt(db, span, id.into(), Edition::CURRENT);
 
     let mac = if use_panic_2021(db, call_site_span) { sym::panic_2021 } else { sym::panic_2015 };
-
     // Pass the original arguments
+
     let subtree = WithDelimiter {
         delimiter: tt::Delimiter {
             open: call_site_span,
         },
         token_trees: tt.token_trees(),
     };
-
     // Expand to a macro call `$crate::panic::panic_{edition}`
+
     let call = quote!(call_site_span =>#dollar_crate::panic::#mac! #subtree);
 
     ExpandResult::ok(call)
     } else {
         sym::unreachable_2015
     };
-
     // Pass the original arguments
+
     let mut subtree = tt.clone();
     *subtree.top_subtree_delimiter_mut() = tt::Delimiter {
         open: call_site_span,
         close: call_site_span,
         kind: tt::DelimiterKind::Parenthesis,
     };
-
     // Expand to a macro call `$crate::panic::panic_{edition}`
+
     let call = quote!(call_site_span =>#dollar_crate::panic::#mac! #subtree);
 
     ExpandResult::ok(call)
         _ => ExpandError::other(span, "`compile_error!` argument must be a string"),
     };
 
-    ExpandResult { value: quote! {span =>}, err: Some(err) }
+    ExpandResult {
+        value: quote! {span =>},
+        err: Some(err),
+    }
 }
 
 fn concat_expand(
             );
         }
     };
-
     // FIXME: we're not able to read excluded files (which is most of them because
     // it's unusual to `include_str!` a Rust file), but we can return an empty string.
     // Ideally, we'd be able to offer a precise expansion if the user asks for macro
     // expansion.
+
     let file_id = match relative_file(db, arg_id, path.as_str(), true, input_span) {
         Ok(file_id) => file_id,
         Err(_) => {