COMPARISON DIFF
============================================================

Original size: 13362 bytes
Chloro size:   13769 bytes
Rustfmt size:  13389 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! The home of `HirDatabase`, which is the Salsa database containing all the
 //! type inference-related queries.
 
-use base_db::{target::TargetLoadError, Crate};
+use base_db::{Crate, target::TargetLoadError};
 use hir_def::{
-    db::DefDatabase, hir::ExprId, layout::TargetDataLayout, AdtId, BlockId, CallableDefId,
-    ConstParamId, DefWithBodyId, EnumVariantId, FunctionId, GeneralConstId, GenericDefId, ImplId,
-    LifetimeParamId, LocalFieldId, StaticId, TraitId, TypeAliasId, TypeOrConstParamId, VariantId,
+    db::DefDatabase,
+    hir::ExprId,
+    layout::TargetDataLayout,
+    AdtId, BlockId, CallableDefId, ConstParamId, DefWithBodyId, EnumVariantId, FunctionId,
+    GeneralConstId, GenericDefId, ImplId, LifetimeParamId, LocalFieldId, StaticId, TraitId,
+    TypeAliasId, TypeOrConstParamId, VariantId,
 };
 use hir_expand::name::Name;
 use la_arena::ArenaMap;
 };
 
 #[query_group::query_group]
-pub trait HirDatabase: DefDatabase + std::fmt::Debug {
+pub trait HirDatabase {
     #[salsa::invoke(crate::infer::infer_query)]
     #[salsa::cycle(cycle_result = crate::infer::infer_cycle_result)]
-    fn infer<'db>(&'db self, def: DefWithBodyId) -> Arc<InferenceResult<'db>>;
-
+    fn infer<'db>(
+        &'db self,
+        def: DefWithBodyId,
+    ) -> Arc<InferenceResult<'db>>;
     // region:mir
 
     #[salsa::invoke(crate::mir::mir_body_query)]
 
     #[salsa::invoke(crate::consteval::const_eval_static_query)]
     #[salsa::cycle(cycle_result = crate::consteval::const_eval_static_cycle_result)]
-    fn const_eval_static<'db>(&'db self, def: StaticId) -> Result<Const<'db>, ConstEvalError<'db>>;
+    fn const_eval_static<'db>(
+        &'db self,
+        def: StaticId,
+    ) -> Result<Const<'db>, ConstEvalError<'db>>;
 
     #[salsa::invoke(crate::consteval::const_eval_discriminant_variant)]
     #[salsa::cycle(cycle_result = crate::consteval::const_eval_discriminant_cycle_result)]
         func: FunctionId,
         fn_subst: GenericArgs<'db>,
     ) -> (FunctionId, GenericArgs<'db>);
-
     // endregion:mir
 
     #[salsa::invoke(crate::layout::layout_of_adt_query)]
     ) -> Result<Arc<Layout>, LayoutError>;
 
     #[salsa::invoke(crate::layout::target_data_layout_query)]
-    fn target_data_layout(&self, krate: Crate) -> Result<Arc<TargetDataLayout>, TargetLoadError>;
+    fn target_data_layout(
+        &self,
+        krate: Crate,
+    ) -> Result<Arc<TargetDataLayout>, TargetLoadError>;
 
     #[salsa::invoke(crate::dyn_compatibility::dyn_compatibility_of_trait_query)]
-    fn dyn_compatibility_of_trait(&self, trait_: TraitId) -> Option<DynCompatibilityViolation>;
+    fn dyn_compatibility_of_trait(
+        &self,
+        trait_: TraitId,
+    ) -> Option<DynCompatibilityViolation>;
 
     #[salsa::invoke(crate::lower::ty_query)]
     #[salsa::transparent]
-    fn ty<'db>(&'db self, def: TyDefId) -> EarlyBinder<'db, Ty<'db>>;
+    fn ty<'db>(
+        &'db self,
+        def: TyDefId,
+    ) -> EarlyBinder<'db, Ty<'db>>;
 
     #[salsa::invoke(crate::lower::type_for_type_alias_with_diagnostics_query)]
     #[salsa::cycle(cycle_result = crate::lower::type_for_type_alias_with_diagnostics_cycle_result)]
     /// Returns the type of the value of the given constant, or `None` if the `ValueTyDefId` is
     /// a `StructId` or `EnumVariantId` with a record constructor.
     #[salsa::invoke(crate::lower::value_ty_query)]
-    fn value_ty<'db>(&'db self, def: ValueTyDefId) -> Option<EarlyBinder<'db, Ty<'db>>>;
+    fn value_ty<'db>(
+        &'db self,
+        def: ValueTyDefId,
+    ) -> Option<EarlyBinder<'db, Ty<'db>>>;
 
     #[salsa::invoke(crate::lower::impl_self_ty_with_diagnostics_query)]
     #[salsa::cycle(cycle_result = crate::lower::impl_self_ty_with_diagnostics_cycle_result)]
 
     #[salsa::invoke(crate::lower::impl_self_ty_query)]
     #[salsa::transparent]
-    fn impl_self_ty<'db>(&'db self, def: ImplId) -> EarlyBinder<'db, Ty<'db>>;
+    fn impl_self_ty<'db>(
+        &'db self,
+        def: ImplId,
+    ) -> EarlyBinder<'db, Ty<'db>>;
 
-    // FIXME: Make this a non-interned query.
     #[salsa::invoke_interned(crate::lower::const_param_ty_with_diagnostics_query)]
     #[salsa::cycle(cycle_result = crate::lower::const_param_ty_with_diagnostics_cycle_result)]
-    fn const_param_ty_with_diagnostics<'db>(&'db self, def: ConstParamId)
-        -> (Ty<'db>, Diagnostics);
+    fn const_param_ty_with_diagnostics<'db>(
+        &'db self,
+        def: ConstParamId,
+    ) -> (Ty<'db>, Diagnostics);
 
     #[salsa::invoke(crate::lower::const_param_ty_query)]
     #[salsa::transparent]
-    fn const_param_ty_ns<'db>(&'db self, def: ConstParamId) -> Ty<'db>;
+    fn const_param_ty_ns<'db>(
+        &'db self,
+        def: ConstParamId,
+    ) -> Ty<'db>;
 
     #[salsa::invoke(crate::lower::impl_trait_with_diagnostics_query)]
     fn impl_trait_with_diagnostics<'db>(
 
     #[salsa::invoke(crate::lower::impl_trait_query)]
     #[salsa::transparent]
-    fn impl_trait<'db>(&'db self, def: ImplId) -> Option<EarlyBinder<'db, TraitRef<'db>>>;
+    fn impl_trait<'db>(
+        &'db self,
+        def: ImplId,
+    ) -> Option<EarlyBinder<'db, TraitRef<'db>>>;
 
     #[salsa::invoke(crate::lower::field_types_with_diagnostics_query)]
     fn field_types_with_diagnostics<'db>(
         &'db self,
         var: VariantId,
-    ) -> (
-        Arc<ArenaMap<LocalFieldId, EarlyBinder<'db, Ty<'db>>>>,
-        Diagnostics,
-    );
+    ) -> (Arc<ArenaMap<LocalFieldId, EarlyBinder<'db, Ty<'db>>>>, Diagnostics);
 
     #[salsa::invoke(crate::lower::field_types_query)]
     #[salsa::transparent]
     ) -> GenericPredicates<'db>;
 
     #[salsa::invoke(crate::lower::generic_predicates_query)]
-    fn generic_predicates<'db>(&'db self, def: GenericDefId) -> GenericPredicates<'db>;
+    fn generic_predicates<'db>(
+        &'db self,
+        def: GenericDefId,
+    ) -> GenericPredicates<'db>;
 
     #[salsa::invoke(crate::lower::trait_environment_for_body_query)]
     #[salsa::transparent]
-    fn trait_environment_for_body<'db>(&'db self, def: DefWithBodyId)
-        -> Arc<TraitEnvironment<'db>>;
+    fn trait_environment_for_body<'db>(
+        &'db self,
+        def: DefWithBodyId,
+    ) -> Arc<TraitEnvironment<'db>>;
 
     #[salsa::invoke(crate::lower::trait_environment_query)]
-    fn trait_environment<'db>(&'db self, def: GenericDefId) -> Arc<TraitEnvironment<'db>>;
+    fn trait_environment<'db>(
+        &'db self,
+        def: GenericDefId,
+    ) -> Arc<TraitEnvironment<'db>>;
 
     #[salsa::invoke(crate::lower::generic_defaults_with_diagnostics_query)]
     #[salsa::cycle(cycle_result = crate::lower::generic_defaults_with_diagnostics_cycle_result)]
     /// The binders of the returned defaults are only up to (not including) this parameter.
     #[salsa::invoke(crate::lower::generic_defaults_query)]
     #[salsa::transparent]
-    fn generic_defaults<'db>(&'db self, def: GenericDefId) -> GenericDefaults<'db>;
+    fn generic_defaults<'db>(
+        &'db self,
+        def: GenericDefId,
+    ) -> GenericDefaults<'db>;
 
     #[salsa::invoke(InherentImpls::inherent_impls_in_crate_query)]
-    fn inherent_impls_in_crate(&self, krate: Crate) -> Arc<InherentImpls>;
+    fn inherent_impls_in_crate(
+        &self,
+        krate: Crate,
+    ) -> Arc<InherentImpls>;
 
     #[salsa::invoke(InherentImpls::inherent_impls_in_block_query)]
-    fn inherent_impls_in_block(&self, block: BlockId) -> Option<Arc<InherentImpls>>;
+    fn inherent_impls_in_block(
+        &self,
+        block: BlockId,
+    ) -> Option<Arc<InherentImpls>>;
 
     /// Collects all crates in the dependency graph that have impls for the
     /// given fingerprint. This is only used for primitive types and types
     ) -> SmallVec<[Crate; 2]>;
 
     #[salsa::invoke(TraitImpls::trait_impls_in_crate_query)]
-    fn trait_impls_in_crate(&self, krate: Crate) -> Arc<TraitImpls>;
+    fn trait_impls_in_crate(
+        &self,
+        krate: Crate,
+    ) -> Arc<TraitImpls>;
 
     #[salsa::invoke(TraitImpls::trait_impls_in_block_query)]
-    fn trait_impls_in_block(&self, block: BlockId) -> Option<Arc<TraitImpls>>;
+    fn trait_impls_in_block(
+        &self,
+        block: BlockId,
+    ) -> Option<Arc<TraitImpls>>;
 
     #[salsa::invoke(TraitImpls::trait_impls_in_deps_query)]
-    fn trait_impls_in_deps(&self, krate: Crate) -> Arc<[Arc<TraitImpls>]>;
-
-    // Interned IDs for solver integration
-    #[salsa::interned]
-    fn intern_impl_trait_id(&self, id: ImplTraitId<'_>) -> InternedOpaqueTyId;
-
-    #[salsa::interned]
-    fn intern_closure(&self, id: InternedClosure) -> InternedClosureId;
+    fn trait_impls_in_deps(
+        &self,
+        krate: Crate,
+    ) -> Arc<[Arc<TraitImpls>]>;
 
     #[salsa::interned]
-    fn intern_coroutine(&self, id: InternedCoroutine) -> InternedCoroutineId;
+    fn intern_impl_trait_id(
+        &self,
+        id: ImplTraitId<'_>,
+    ) -> InternedOpaqueTyId;
+
+    #[salsa::interned]
+    fn intern_closure(
+        &self,
+        id: InternedClosure,
+    ) -> InternedClosureId;
+
+    #[salsa::interned]
+    fn intern_coroutine(
+        &self,
+        id: InternedCoroutine,
+    ) -> InternedCoroutineId;
 
     #[salsa::invoke(crate::variance::variances_of)]
     #[salsa::cycle(
         // cycle_initial = crate::variance::variances_of_cycle_initial,
         cycle_result = crate::variance::variances_of_cycle_initial,
     )]
-    fn variances_of<'db>(&'db self, def: GenericDefId) -> VariancesOf<'db>;
+    fn variances_of<'db>(
+        &'db self,
+        def: GenericDefId,
+    ) -> VariancesOf<'db>;
 }
 
 #[test]