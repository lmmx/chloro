COMPARISON DIFF
============================================================

Original size: 16583 bytes
Chloro size:   16529 bytes
Rustfmt size:  16583 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! Type cast logic. Basically coercion + additional casts.
 
 use hir_def::{AdtId, hir::ExprId, signatures::TraitFlags};
 use rustc_ast_ir::Mutability;
 use rustc_type_ir::{
-    Flags, InferTy, TypeFlags, UintTy,
     inherent::{AdtDef, BoundExistentialPredicates as _, IntoKind, SliceLike, Ty as _},
+    Flags, InferTy, TypeFlags, UintTy,
 };
 use stdx::never;
 
 use crate::{
-    InferenceDiagnostic,
     db::HirDatabase,
-    infer::{AllowTwoPhase, InferenceContext, coerce::CoerceNever},
+    infer::{coerce::CoerceNever, AllowTwoPhase, InferenceContext},
     next_solver::{BoundExistentialPredicates, DbInterner, ParamTy, Ty, TyKind},
+    InferenceDiagnostic,
 };
 
 #[derive(Debug)]
     ) -> Result<(), InferenceDiagnostic<'db>> {
         self.expr_ty = ctx.table.eagerly_normalize_and_resolve_shallow_in(self.expr_ty);
         self.cast_ty = ctx.table.eagerly_normalize_and_resolve_shallow_in(self.cast_ty);
-
         // This should always come first so that we apply the coercion, which impacts infer vars.
+
         if ctx
             .coerce(
                 self.source_expr.into(),
                 cast_ty: self.cast_ty,
             });
         }
-
         // Chalk doesn't support trait upcasting and fails to solve some obvious goals
         // when the trait environment contains some recursive traits (See issue #18047)
         // We skip cast checks for such cases for now, until the next-gen solver.
+
         if contains_dyn_trait(self.cast_ty) {
             return Ok(());
         }
                 },
                 _ => return Err(CastError::NonScalar),
             };
-
         // rustc checks whether the `expr_ty` is foreign adt with `non_exhaustive` sym
 
         match (t_from, t_cast) {
 
 #[derive(Debug, PartialEq, Eq)]
 enum PointerKind<'db> {
-    // thin pointer
     Thin,
-    // trait object
     VTable(BoundExistentialPredicates<'db>),
-    // slice
     Length,
     OfAlias,
     OfParam(ParamTy),