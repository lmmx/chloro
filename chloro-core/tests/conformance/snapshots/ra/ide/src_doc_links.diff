COMPARISON DIFF
============================================================

Original size: 31554 bytes
Chloro size:   30817 bytes
Rustfmt size:  31554 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
 //! Extracts, resolves and rewrites links and intra-doc links in markdown documentation.
 
 #[cfg(test)]
 mod tests;
-
 mod intra_doc_links;
 
 use std::ops::Range;
 
-use pulldown_cmark::{BrokenLink, CowStr, Event, InlineStr, LinkType, Options, Parser, Tag};
-use pulldown_cmark_to_cmark::{Options as CMarkOptions, cmark_resume_with_options};
-use stdx::format_to;
-use url::Url;
-
 use hir::{
-    Adt, AsAssocItem, AssocItem, AssocItemContainer, AttrsWithOwner, HasAttrs, db::HirDatabase, sym,
+    db::HirDatabase, sym, Adt, AsAssocItem, AssocItem, AssocItemContainer, AttrsWithOwner,
+    HasAttrs,
 };
 use ide_db::{
-    RootDatabase,
     base_db::{CrateOrigin, LangCrateOrigin, ReleaseChannel, RootQueryDb},
     defs::{Definition, NameClass, NameRefClass},
-    documentation::{DocsRangeMap, Documentation, HasDocs, docs_with_rangemap},
+    documentation::{docs_with_rangemap, DocsRangeMap, Documentation, HasDocs},
     helpers::pick_best_token,
+    RootDatabase,
 };
+use pulldown_cmark::{BrokenLink, CowStr, Event, InlineStr, LinkType, Options, Parser, Tag};
+use pulldown_cmark_to_cmark::{cmark_resume_with_options, Options as CMarkOptions};
+use stdx::format_to;
 use syntax::{
-    AstNode, AstToken,
-    SyntaxKind::*,
-    SyntaxNode, SyntaxToken, T, TextRange, TextSize,
     ast::{self, IsString},
-    match_ast,
+    match_ast, AstNode, AstToken,
+    SyntaxKind::*,
+    SyntaxNode, SyntaxToken, TextRange, TextSize, T,
 };
+use url::Url;
 
 use crate::{
-    FilePosition, Semantics,
     doc_links::intra_doc_links::{parse_intra_doc_link, strip_prefixes_suffixes},
+    FilePosition, Semantics,
 };
 
 /// Web and local links to an item's documentation.
     pub local_url: Option<String>,
 }
 
-const MARKDOWN_OPTIONS: Options =
-    Options::ENABLE_FOOTNOTES.union(Options::ENABLE_TABLES).union(Options::ENABLE_TASKLISTS);
+const MARKDOWN_OPTIONS: Options = Options::ENABLE_FOOTNOTES.union(Options::ENABLE_TABLES).union(Options::ENABLE_TASKLISTS);
 
 /// Rewrite documentation links in markdown to point to an online host (e.g. docs.rs)
 pub(crate) fn rewrite_links(
     out
 }
 
-// Feature: Open Docs
-//
-// Retrieve a links to documentation for the given symbol.
-//
-// The simplest way to use this feature is via the context menu. Right-click on
-// the selected item. The context menu opens. Select **Open Docs**.
-//
-// | Editor  | Action Name |
-// |---------|-------------|
-// | VS Code | **rust-analyzer: Open Docs** |
 pub(crate) fn external_docs(
     db: &RootDatabase,
     FilePosition { file_id, offset }: FilePosition,
         | Definition::DeriveHelper(_)
         | Definition::InlineAsmRegOrRegClass(_)
         | Definition::InlineAsmOperand(_) => None,
-    }
-    .map(Definition::from)
+    }.map(
+        Definition::from,
+    )
 }
 
 pub(crate) fn doc_attributes(
             },
             _ => None,
         }
-    }).map(|prefix_len| DocCommentToken { prefix_len, doc_token: doc_token.clone() })
+    }).map(
+        |prefix_len| DocCommentToken { prefix_len, doc_token: doc_token.clone() },
+    )
 }
 
 impl DocCommentToken {
         self,
         sema: &Semantics<'_, RootDatabase>,
         offset: TextSize,
-        // Definition, CommentOwner, range of intra doc link in original file
         mut cb: impl FnMut(Definition, SyntaxNode, TextRange) -> Option<T>,
     ) -> Option<T> {
         let DocCommentToken { prefix_len, doc_token } = self;
     Some((/*url*/ link.reference.clone(), /*title*/ link.reference))
 }
 
-// FIXME:
-// BUG: For Option::Some
-// Returns https://doc.rust-lang.org/nightly/core/prelude/v1/enum.Option.html#variant.Some
-// Instead of https://doc.rust-lang.org/nightly/core/option/enum.Option.html
-//
-// This should cease to be a problem if RFC2988 (Stable Rustdoc URLs) is implemented
-// https://github.com/rust-lang/rfcs/pull/2988
 fn get_doc_links(
     db: &RootDatabase,
     def: Definition,
     url.set_fragment(frag);
 
     // We want to strip the keyword prefix from the title, but only if the target is implicitly the same
+
     // as the title.
     let title = match link_type {
         LinkType::Email
         .as_str();
 
     // special case base url of `BuiltinType` to core
+
     // https://github.com/rust-lang/rust-analyzer/issues/12250
     if let Definition::BuiltinType(..) = def {
         let web_link = Url::parse(&format!("https://doc.rust-lang.org/{channel}/core/")).ok();
 fn get_assoc_item_fragment(db: &dyn HirDatabase, assoc_item: hir::AssocItem) -> Option<String> {
     Some(match assoc_item {
         AssocItem::Function(function) => {
-            let is_trait_method =
-                function.as_assoc_item(db).and_then(|assoc| assoc.container_trait(db)).is_some();
             // This distinction may get more complicated when specialization is available.
             // Rustdoc makes this decision based on whether a method 'has defaultness'.
             // Currently this is only the case for provided trait methods.
+            let is_trait_method =
+                function.as_assoc_item(db).and_then(|assoc| assoc.container_trait(db)).is_some();
             if is_trait_method && !function.has_body(db) {
                 format!("tymethod.{}", function.name(db).as_str())
             } else {