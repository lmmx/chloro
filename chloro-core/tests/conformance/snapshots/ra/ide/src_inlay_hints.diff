COMPARISON DIFF
============================================================

Original size: 36233 bytes
Chloro size:   34312 bytes
Rustfmt size:  36233 bytes

âœ— Outputs DIFFER

=== DIFF (- rustfmt, + chloro) ===
-use std::{
-    fmt::{self, Write},
-    mem::{self, take},
-};
-
-use either::Either;
-use hir::{
-    ClosureStyle, DisplayTarget, EditionedFileId, HasVisibility, HirDisplay, HirDisplayError,
-    HirWrite, InRealFile, ModuleDef, ModuleDefId, Semantics, sym,
-};
-use ide_db::{
-    FileRange, MiniCore, RootDatabase, famous_defs::FamousDefs, text_edit::TextEditBuilder,
-};
-use ide_db::{FxHashSet, text_edit::TextEdit};
-use itertools::Itertools;
-use macros::UpmapFromRaFixture;
-use smallvec::{SmallVec, smallvec};
-use stdx::never;
-use syntax::{
-    SmolStr, SyntaxNode, TextRange, TextSize, WalkEvent,
-    ast::{self, AstNode, HasGenericParams},
-    format_smolstr, match_ast,
-};
-
-use crate::{FileId, navigation_target::TryToNav};
-
 mod adjustment;
 mod bind_pat;
 mod binding_mode;
 mod ra_fixture;
 mod range_exclusive;
 
-// Feature: Inlay Hints
-//
-// rust-analyzer shows additional information inline with the source code.
-// Editors usually render this using read-only virtual text snippets interspersed with code.
-//
-// rust-analyzer by default shows hints for
-//
-// * types of local variables
-// * names of function arguments
-// * names of const generic parameters
-// * types of chained expressions
-//
-// Optionally, one can enable additional hints for
-//
-// * return types of closure expressions
-// * elided lifetimes
-// * compiler inserted reborrows
-// * names of generic type and lifetime parameters
-//
-// Note: inlay hints for function argument names are heuristically omitted to reduce noise and will not appear if
-// any of the
-// [following criteria](https://github.com/rust-lang/rust-analyzer/blob/6b8b8ff4c56118ddee6c531cde06add1aad4a6af/crates/ide/src/inlay_hints/param_name.rs#L92-L99)
-// are met:
-//
-// * the parameter name is a suffix of the function's name
-// * the argument is a qualified constructing or call expression where the qualifier is an ADT
-// * exact argument<->parameter match(ignoring leading underscore) or parameter is a prefix/suffix
-//   of argument with _ splitting it off
-// * the parameter name starts with `ra_fixture`
-// * the parameter name is a
-// [well known name](https://github.com/rust-lang/rust-analyzer/blob/6b8b8ff4c56118ddee6c531cde06add1aad4a6af/crates/ide/src/inlay_hints/param_name.rs#L200)
-// in a unary function
-// * the parameter name is a
-// [single character](https://github.com/rust-lang/rust-analyzer/blob/6b8b8ff4c56118ddee6c531cde06add1aad4a6af/crates/ide/src/inlay_hints/param_name.rs#L201)
-// in a unary function
-//
-// ![Inlay hints](https://user-images.githubusercontent.com/48062697/113020660-b5f98b80-917a-11eb-8d70-3be3fd558cdd.png)
+use std::{
+    fmt::{self, Write},
+    mem::{self, take},
+};
+
+use either::Either;
+use hir::{
+    sym, ClosureStyle, DisplayTarget, EditionedFileId, HasVisibility, HirDisplay, HirDisplayError,
+    HirWrite, InRealFile, ModuleDef, ModuleDefId, Semantics,
+};
+use ide_db::{
+    famous_defs::FamousDefs, text_edit::TextEditBuilder, FileRange, MiniCore, RootDatabase,
+};
+use ide_db::{text_edit::TextEdit, FxHashSet};
+use itertools::Itertools;
+use macros::UpmapFromRaFixture;
+use smallvec::{smallvec, SmallVec};
+use stdx::never;
+use syntax::{
+    ast::{self, AstNode, HasGenericParams},
+    format_smolstr, match_ast, SmolStr, SyntaxNode, TextRange, TextSize, WalkEvent,
+};
+
+use crate::{navigation_target::TryToNav, FileId};
+
 pub(crate) fn inlay_hints(
     db: &RootDatabase,
     file_id: FileId,
     }
 }
 
-// FIXME: At some point when our hir infra is fleshed out enough we should flip this and traverse the
-// HIR instead of the syntax tree.
 fn hints(
     hints: &mut Vec<InlayHint>,
     ctx: &mut InlayHintCtx,
     let rendered = sema
         .scope(node_for_hint)
         .and_then(|scope| ty.display_source_code(scope.db, scope.module().into(), false).ok())?;
-    Some(config.lazy_text_edit(|| {
+    Some(
+        config.lazy_text_edit(|| {
         let mut builder = TextEdit::builder();
         builder.insert(offset_to_insert_ty, prefix.into());
         builder.insert(offset_to_insert_ty, rendered);
         additional_edits(&mut builder);
 
         builder.finish()
-    }))
+    }),
+    )
 }
 
 fn closure_has_block_body(closure: &ast::ClosureExpr) -> bool {
 
 #[cfg(test)]
 mod tests {
-
     use expect_test::Expect;
     use hir::ClosureStyle;
     use ide_db::MiniCore;
     use itertools::Itertools;
     use test_utils::extract_annotations;
-
     use crate::DiscriminantHints;
     use crate::inlay_hints::{AdjustmentHints, AdjustmentHintsMode};
-    use crate::{LifetimeElisionHints, fixture, inlay_hints::InlayHintsConfig};
-
+    use crate::{fixture, inlay_hints::InlayHintsConfig, LifetimeElisionHints};
     use super::{ClosureReturnTypeHints, GenericParameterHints, InlayFieldsToResolve};
-
     pub(super) const DISABLED_CONFIG: InlayHintsConfig<'_> = InlayHintsConfig {
         discriminant_hints: DiscriminantHints::Never,
         render_colons: false,
         lifetime_elision_hints: LifetimeElisionHints::Always,
         ..DISABLED_CONFIG
     };
-
     #[track_caller]
     pub(super) fn check(#[rust_analyzer::rust_fixture] ra_fixture: &str) {
         check_with_config(TEST_CONFIG, ra_fixture);
     }
-
     #[track_caller]
     pub(super) fn check_with_config(
         config: InlayHintsConfig<'_>,
 
         assert_eq!(expected, actual, "\nExpected:\n{expected:#?}\n\nActual:\n{actual:#?}");
     }
-
     #[track_caller]
     pub(super) fn check_expect(
         config: InlayHintsConfig<'_>,
             inlay_hints.into_iter().map(|hint| (hint.range, hint.label)).collect::<Vec<_>>();
         expect.assert_debug_eq(&filtered)
     }
-
     /// Computes inlay hints for the fixture, applies all the provided text edits and then runs
     /// expect test.
     #[track_caller]
         edits.apply(&mut actual);
         expect.assert_eq(&actual);
     }
-
     #[track_caller]
     pub(super) fn check_no_edit(
         config: InlayHintsConfig<'_>,
 
         assert!(edits.is_empty(), "unexpected edits: {edits:?}");
     }
-
     #[test]
     fn hints_disabled() {
         check_with_config(
 }"#,
         );
     }
-
     #[test]
     fn regression_18840() {
         check(
 "#,
         );
     }
-
     #[test]
     fn regression_18898() {
         check(
 "#,
         );
     }
-
     #[test]
     fn closure_dependency_cycle_no_panic() {
         check(
         "#,
         );
     }
-
     #[test]
     fn regression_19610() {
         check(
 "#,
         );
     }
-
     #[test]
     fn regression_20239() {
         check_with_config(