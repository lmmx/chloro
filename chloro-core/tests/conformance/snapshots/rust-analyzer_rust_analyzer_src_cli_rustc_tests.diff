COMPARISON DIFF
============================================================

Original size: 12430 bytes
Chloro size:   10906 bytes
Rustfmt size:  12430 bytes

âœ— Outputs DIFFER

--- DIFF (- rustfmt, + chloro) ---
 use ide::{AnalysisHost, DiagnosticCode, DiagnosticsConfig};
 use ide_db::base_db;
 use itertools::Either;
+use load_cargo::{LoadCargoConfig, ProcMacroServerChoice, load_workspace};
 use profile::StopWatch;
 use project_model::toolchain_info::{QueryConfig, target_data};
 use project_model::{
     CargoConfig, ManifestPath, ProjectWorkspace, ProjectWorkspaceKind, RustLibSource,
     RustSourceWorkspaceConfig, Sysroot,
 };
-
-use load_cargo::{LoadCargoConfig, ProcMacroServerChoice, load_workspace};
 use rustc_hash::FxHashMap;
 use vfs::{AbsPathBuf, FileId};
 use walkdir::WalkDir;
 
 use crate::cli::{Result, flags, report_metric};
-
 struct Tester {
     host: AnalysisHost,
     root_file: FileId,
             set_test: true,
             ..Default::default()
         };
-
         let mut sysroot = Sysroot::discover(tmp_file.parent().unwrap(), &cargo_config.extra_env);
         let loaded_sysroot =
             sysroot.load_workspace(&RustSourceWorkspaceConfig::default_cargo(), false, &|_| ());
         if let Some(loaded_sysroot) = loaded_sysroot {
             sysroot.set_workspace(loaded_sysroot);
         }
-
         let target_data = target_data::get(
             QueryConfig::Rustc(&sysroot, tmp_file.parent().unwrap().as_ref()),
             None,
             &cargo_config.extra_env,
         );
-
         let workspace = ProjectWorkspace {
             kind: ProjectWorkspaceKind::DetachedFile {
                 file: ManifestPath::try_from(tmp_file).unwrap(),
         change.change_file(self.root_file, Some(text));
         self.host.apply_change(change);
         let diagnostic_config = DiagnosticsConfig::test_sample();
-
         let res = std::thread::scope(|s| {
             let worker = Builder::new()
                 .stack_size(40 * 1024 * 1024)
 }
 
 /// These tests break rust-analyzer (either by panicking or hanging) so we should ignore them.
-const IGNORED_TESTS: &[&str] = &[
-    "trait-with-missing-associated-type-restriction.rs", // #15646
-    "trait-with-missing-associated-type-restriction-fixable.rs", // #15646
-    "resolve-self-in-impl.rs",
-    "basic.rs", // ../rust/tests/ui/associated-type-bounds/return-type-notation/basic.rs
-    "issue-26056.rs",
-    "float-field.rs",
-    "invalid_operator_trait.rs",
-    "type-alias-impl-trait-assoc-dyn.rs",
-    "deeply-nested_closures.rs",    // exponential time
-    "hang-on-deeply-nested-dyn.rs", // exponential time
-    "dyn-rpit-and-let.rs", // unexpected free variable with depth `^1.0` with outer binder ^0
-    "issue-16098.rs",      // Huge recursion limit for macros?
-    "issue-83471.rs", // crates/hir-ty/src/builder.rs:78:9: assertion failed: self.remaining() > 0
-];
+// #15646
+// #15646
+// ../rust/tests/ui/associated-type-bounds/return-type-notation/basic.rs
+// exponential time
+// exponential time
+// unexpected free variable with depth `^1.0` with outer binder ^0
+// Huge recursion limit for macros?
+// crates/hir-ty/src/builder.rs:78:9: assertion failed: self.remaining() > 0
 
-const SUPPORTED_DIAGNOSTICS: &[DiagnosticCode] = &[
-    DiagnosticCode::RustcHardError("E0023"),
-    DiagnosticCode::RustcHardError("E0046"),
-    DiagnosticCode::RustcHardError("E0063"),
-    DiagnosticCode::RustcHardError("E0107"),
-    DiagnosticCode::RustcHardError("E0117"),
-    DiagnosticCode::RustcHardError("E0133"),
-    DiagnosticCode::RustcHardError("E0210"),
-    DiagnosticCode::RustcHardError("E0268"),
-    DiagnosticCode::RustcHardError("E0308"),
-    DiagnosticCode::RustcHardError("E0384"),
-    DiagnosticCode::RustcHardError("E0407"),
-    DiagnosticCode::RustcHardError("E0432"),
-    DiagnosticCode::RustcHardError("E0451"),
-    DiagnosticCode::RustcHardError("E0507"),
-    DiagnosticCode::RustcHardError("E0583"),
-    DiagnosticCode::RustcHardError("E0559"),
-    DiagnosticCode::RustcHardError("E0616"),
-    DiagnosticCode::RustcHardError("E0618"),
-    DiagnosticCode::RustcHardError("E0624"),
-    DiagnosticCode::RustcHardError("E0774"),
-    DiagnosticCode::RustcHardError("E0767"),
-    DiagnosticCode::RustcHardError("E0777"),
-];
 
 impl flags::RustcTests {
     pub fn run(self) -> Result<()> {